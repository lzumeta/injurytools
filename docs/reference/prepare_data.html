<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="These are the data preprocessing functions provided by the injurytools
package, which involve:
setting exposure and injury data in a standardized
format and
integrating both sources of data into an adequate data structure.
prepare_inj() and prepare_exp() set standardized names and
proper classes to the (key) columns in injury and exposure data,
respectively. prepare_all() integrates both, standardized injury and
exposure data sets, and convert them into an injd S3 object
that has an adequate structure for further statistical analyses.
See the Prepare Sports Injury Data
vignette for details."><title>Prepare data in a standardized format — prepare_data • injurytools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data in a standardized format — prepare_data"><meta property="og:description" content="These are the data preprocessing functions provided by the injurytools
package, which involve:
setting exposure and injury data in a standardized
format and
integrating both sources of data into an adequate data structure.
prepare_inj() and prepare_exp() set standardized names and
proper classes to the (key) columns in injury and exposure data,
respectively. prepare_all() integrates both, standardized injury and
exposure data sets, and convert them into an injd S3 object
that has an adequate structure for further statistical analyses.
See the Prepare Sports Injury Data
vignette for details."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">injurytools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/prepare-injury-data.html">Prepare data</a>
    <a class="dropdown-item" href="../articles/estimate-epi-measures.html">Estimate summary statistics</a>
    <a class="dropdown-item" href="../articles/explore-injury-data.html">Visualize data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lzumeta/injurytools">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare data in a standardized format</h1>
      <small class="dont-index">Source: <a href="https://github.com/lzumeta/injurytools/blob/HEAD/R/prepare_data.R" class="external-link"><code>R/prepare_data.R</code></a></small>
      <div class="d-none name"><code>prepare_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These are the data preprocessing functions provided by the <code>injurytools</code>
package, which involve:</p><ol><li><p>setting <strong>exposure</strong> and <strong>injury data</strong> in a standardized
format and</p></li>
<li><p>integrating both sources of data into an adequate data structure.</p></li>
</ol><p><code>prepare_inj()</code> and <code>prepare_exp()</code> set standardized names and
proper classes to the (key) columns in injury and exposure data,
respectively. <code>prepare_all()</code> integrates both, standardized injury and
exposure data sets, and convert them into an <code>injd</code> <strong>S3</strong> object
that has an adequate structure for further statistical analyses.
See the <a href="https://lzumeta.github.io/injurytools/articles/prepare-injury-data.html" class="external-link">Prepare Sports Injury Data</a>
vignette for details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">prepare_inj</span><span class="op">(</span>
  <span class="va">df_injuries0</span>,
  player <span class="op">=</span> <span class="st">"player"</span>,
  date_injured <span class="op">=</span> <span class="st">"date_injured"</span>,
  date_recovered <span class="op">=</span> <span class="st">"date_recovered"</span>
<span class="op">)</span>

<span class="fu">prepare_exp</span><span class="op">(</span>
  <span class="va">df_exposures0</span>,
  player <span class="op">=</span> <span class="st">"player"</span>,
  date <span class="op">=</span> <span class="st">"date"</span>,
  time_expo <span class="op">=</span> <span class="st">"time_expo"</span>
<span class="op">)</span>

<span class="fu">prepare_all</span><span class="op">(</span>
  <span class="va">data_exposures</span>,
  <span class="va">data_injuries</span>,
  exp_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"minutes"</span>, <span class="st">"hours"</span>, <span class="st">"days"</span>, <span class="st">"matches_num"</span>, <span class="st">"matches_minutes"</span>,
    <span class="st">"activity_days"</span>, <span class="st">"seasons"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df_injuries0</dt>
<dd><p>A data frame containing injury information, i.e. columns
referring to the player name/id, date of injury and date of recovery (as
minimal data).</p></dd>


<dt>player</dt>
<dd><p>Character referring to the column name where player information
is stored.</p></dd>


<dt>date_injured</dt>
<dd><p>Character referring to the column name where the
information about the date of injury is stored.</p></dd>


<dt>date_recovered</dt>
<dd><p>Character referring to the column name where the
information about the date of recovery is stored.</p></dd>


<dt>df_exposures0</dt>
<dd><p>A data frame containing exposure information, i.e.
columns referring to the player name/id, date of exposure, and the total
time of exposure of the corresponding data entry (as minimal data).</p></dd>


<dt>date</dt>
<dd><p>Character referring to the column name where the exposure date
information is stored. Besides, the column must be of class
<a href="https://rdrr.io/r/base/Dates.html" class="external-link">Date</a> or
<a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a>/<a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a>. If it is
<code>integer</code>/<code>numeric</code>, it should refer to the year in which the
season started (e.g. date = 2015 to refer to the 2015/2016 season)(e.g.
<code>date</code> = 2018).</p></dd>


<dt>time_expo</dt>
<dd><p>Character referring to the column name where the information
about the time of exposure in that corresponding date is stored.</p></dd>


<dt>data_exposures</dt>
<dd><p>Exposure data frame with standardized column names, in
the same fashion that <code>prepare_exp()</code> returns.</p></dd>


<dt>data_injuries</dt>
<dd><p>Injury data frame with standardized column names, in the
same fashion that <code>prepare_inj()</code> returns.</p></dd>


<dt>exp_unit</dt>
<dd><p>Character defining the unit of exposure time ("minutes" the
default).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>prepare_inj()</code> returns a data frame in which the key columns in
injury data are standardized and have a proper format.</p>


<p><code>prepare_exp()</code> returns a data frame in which the key columns in
exposure data are standardized and have a proper format.</p>


<p><code>prepare_all()</code> returns the <code>injd</code></p>
<p></p>
<p><strong>S3</strong> object that
contains all the necessary information and a proper data structure to
perform further statistical analyses (e.g. calculate injury summary
statistics, visualize injury data).</p><ul><li><p>If <code>exp_unit</code> is "minutes" (the default), the columns
<code>tstart_min</code> and <code>tstop_min</code> are created which specify the time
to event (injury) values, the starting and stopping time of the interval,
respectively. That is the training time in minutes, that the player has
been at risk, until an injury (or censorship) has occurred. For other
choices, <code>tstart_x</code> and <code>tstop_x</code> are also created according to
the <code>exp_unit</code> indicated (<code>x</code>, one of: <code>min</code>, <code>h</code>,
<code>match</code>, <code>minPlay</code>, <code>d</code>, <code>acd</code> or <code>s</code>). These
columns will be useful for survival analysis routines. See Note section.</p></li>
<li><p>It also creates <code>days_lost</code> column based on the difference between
<code>date_recovered</code> and <code>date_injured</code> in days. And if it does exist (in
the raw data) it overrides.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Depending on the unit of exposure, <code>tstart_x</code> and <code>tstop_x</code>
columns might have same values (e.g. if <code>exp_unit</code> = "matches_num" and the
player has not played any match between the corresponding period of time).
Please be aware of this before performing any survival analysis related
task.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">df_injuries</span> <span class="op">&lt;-</span> <span class="fu">prepare_inj</span><span class="op">(</span>df_injuries0   <span class="op">=</span> <span class="va">raw_df_injuries</span>,</span>
<span class="r-in">                           player         <span class="op">=</span> <span class="st">"player_name"</span>,</span>
<span class="r-in">                           date_injured   <span class="op">=</span> <span class="st">"from"</span>,</span>
<span class="r-in">                           date_recovered <span class="op">=</span> <span class="st">"until"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">df_exposures</span> <span class="op">&lt;-</span> <span class="fu">prepare_exp</span><span class="op">(</span>df_exposures0 <span class="op">=</span> <span class="va">raw_df_exposures</span>,</span>
<span class="r-in">                            player        <span class="op">=</span> <span class="st">"player_name"</span>,</span>
<span class="r-in">                            date          <span class="op">=</span> <span class="st">"year"</span>,</span>
<span class="r-in">                            time_expo     <span class="op">=</span> <span class="st">"minutes_played"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">injd</span> <span class="op">&lt;-</span> <span class="fu">prepare_all</span><span class="op">(</span>data_exposures <span class="op">=</span> <span class="va">df_exposures</span>,</span>
<span class="r-in">                    data_injuries  <span class="op">=</span> <span class="va">df_injuries</span>,</span>
<span class="r-in">                    exp_unit <span class="op">=</span> <span class="st">"matches_minutes"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">injd</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   player       t0         tf         date_inj…¹ date_rec…² tstart     tstop     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> adam-lallana 2017-07-01 2019-06-30 2017-07-31 2017-11-25 2017-07-01 2017-07-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> adam-lallana 2017-07-01 2019-06-30 2018-03-31 2018-05-13 2017-11-25 2018-03-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> adam-lallana 2017-07-01 2019-06-30 2018-09-04 2018-10-19 2018-05-13 2018-09-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> adam-lallana 2017-07-01 2019-06-30 2018-11-09 2018-12-04 2018-10-19 2018-11-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> adam-lallana 2017-07-01 2019-06-30 2019-01-06 2019-01-18 2018-12-04 2019-01-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> adam-lallana 2017-07-01 2019-06-30 2019-04-01 2019-05-31 2019-01-18 2019-04-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 12 more variables: tstart_minPlay &lt;dbl&gt;, tstop_minPlay &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   status &lt;dbl&gt;, enum &lt;dbl&gt;, days_lost &lt;dbl&gt;, player_id &lt;fct&gt;, season &lt;fct&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   games_lost &lt;dbl&gt;, injury &lt;chr&gt;, injury_acl &lt;fct&gt;, injury_type &lt;fct&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   injury_severity &lt;fct&gt;, and abbreviated variable names ¹​date_injured,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ²​date_recovered</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">injd</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "injd"       "tbl_df"     "tbl"        "data.frame"</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">injd</span>, <span class="fl">1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> injd [108 × 19] (S3: injd/tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "unit_exposure")= chr "matches_minutes"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "follow_up")= tibble [28 × 3] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "data_exposures")='data.frame':	42 obs. of  16 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "data_injuries")= tibble [82 × 11] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "data_injuries_long")= tibble [164 × 3] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Lore Zumeta Olaskoaga, Dae-Jin Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

