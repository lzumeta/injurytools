[{"path":"https://lzumeta.github.io/injurytools/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 injurytools Lore Zumeta Olaskoaga Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":[]},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"rates","dir":"Articles","previous_headings":"Measures of occurrence","what":"Rates","title":"Estimate Measures of Injury Epidemiology","text":"Hodgson Phillips (2000) state, “Sports injuries occur athletes exposed given sport occur specific conditions, known time place.” Thus, attempting describe distribution injuries necessary relate population risk specified time period. fundamental unit measurement rate. rate measure consists denominator numerator period time. Denominator data can number different things (e.g. number minutes trained/played, number matches played). , reflects speed new “injury-related” events occur.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"injury-incidence-rate","dir":"Articles","previous_headings":"Measures of occurrence > Rates","what":"Injury incidence rate","title":"Estimate Measures of Injury Epidemiology","text":"Injury incidence rate number new injury cases (\\(\\)) per unit player-exposure time, .e. \\[ I_{r} = \\frac{}{\\Delta T}\\] \\(\\Delta T\\) total time risk study population.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"injury-burden-rate","dir":"Articles","previous_headings":"Measures of occurrence > Rates","what":"Injury burden rate","title":"Estimate Measures of Injury Epidemiology","text":"Injury burden rate number days lost (\\(n_d\\)) per unit player-exposure time, .e. \\[I_{br} = \\frac{n_d}{\\Delta T}\\] \\(\\Delta T\\) total time risk study population.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"prevalence","dir":"Articles","previous_headings":"Measures of occurrence","what":"Prevalence","title":"Estimate Measures of Injury Epidemiology","text":"Prevalence, period prevalence, proportion refers number players reported injury interest (\\(X\\)) divided total player-population risk time specified period time (\\(\\Delta T\\) time window). includes players already injury start time period well suffer period. \\[P = \\frac{X}{N}\\] \\(X\\) number injury cases \\(N\\) total number players study point time window \\(\\Delta T\\).","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"in-practice","dir":"Articles","previous_headings":"","what":"In practice","title":"Estimate Measures of Injury Epidemiology","text":", prepare-data vignette, use data sets available injurytools package: data Liverpool Football Club male’s first team players two consecutive seasons, 2017-2018 2018-2019, scrapped https://www.transfermarkt.com/ website1.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"injsummary","dir":"Articles","previous_headings":"In practice","what":"- injsummary()","title":"Estimate Measures of Injury Epidemiology","text":"Now, preprocessed data passed injsummary() calculate injury summary statistics: notice warning messages pop (unless quiet = TRUE). displayed make clear exposure time unit is2. injsummary() returns output list two elements: .e. output stored injds object consists ,two data frames (two tables), can accessed typing injds[[1]] (injds[[\"playerwise\"]]) injds[[2]] (injds[[\"overal\"]]). present results tidier comprehensible way (instead R code styled output) following can done: used RMarkdown, particular knitr::kable() function, report tables way. Note provide numbers easy interpret avoid small decimals, injury incidence injury burden reported ‘per 100 player-match exposure’. example exposure time minutes played matches, multiply rates 90*100 (.e. 90 minutes lasts football match). reported incidence rate estimated \\(\\hat{}_r = \\frac{82}{74690}\\times90\\times100\\). Players highest injury incidence rate (type injuries) Adam Lallana Daniel Sturridge 77.1 29.1 injuries per 100 player-matches respectively. teams overall injury incidence 9.9 injuries per 100 player-matches injury burden 246.9 days lost per 100 player-matches. summaries can done type injury: results team regarding injury incidence injury burden type injury:","code":"df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") injds <- injsummary(injd) #> Warning in injsummary_unit(unit, injds, quiet):  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #> Warning in injsummary_unit(unit, injds_overall, quiet):  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) str(injds, 1) #> List of 2 #>  $ playerwise: tibble [28 × 9] (S3: tbl_df/tbl/data.frame) #>  $ overall   : tibble [1 × 14] (S3: tbl_df/tbl/data.frame) #>  - attr(*, \"class\")= chr [1:2] \"injds\" \"list\" #>  - attr(*, \"unit_exposure\")= chr \"matches_minutes\" #>  - attr(*, \"unit_timerisk\")= chr \"100 player-match\" #>  - attr(*, \"conf_level\")= num 0.95 # the 'playerwise' data frame injds[[1]] # format the 'playerwise' data frame for output as a table injds[[1]] |>    arrange(desc(injincidence)) |> # sort by decreasing order of injincidence   head(10) |>   kable(digits = 2, col.names = c(\"Player\", \"N injuries\", \"N days lost\",                                    \"Mean days lost\", \"Median days lost\", \"IQR days lost\",                                   \"Total exposure\", \"Incidence\", \"Burden\")) # the 'overall' data frame injds[[2]] # format the table of total incidence and burden (main columns) injds[[2]] |>    select(1:8) |>    data.frame(row.names = \"TOTAL\") |>    kable(digits = 2,         col.names = c(\"N injuries\", \"N days lost\", \"Mean days lost\",                       \"Median days lost\", \"IQR days lost\",                       \"Total exposure\", \"Incidence\", \"Burden\"),         row.names = TRUE) |>    kable_styling(full_width = FALSE) # format the table of total incidence and burden (point + ci estimates) injds_tot_cis <- injds[[2]] |>    select(7:last_col()) |>    data.frame(row.names = \"TOTAL\") injds_tot_cis$ci_injincidence <- paste0(\"[\",  round(injds_tot_cis$injincidence_lower, 1),                                         \", \", round(injds_tot_cis$injincidence_upper, 1), \"]\") injds_tot_cis$ci_injburden    <- paste0(\"[\",  round(injds_tot_cis$injburden_lower, 1),                                         \", \", round(injds_tot_cis$injburden_upper, 1), \"]\")  conf_level <- attr(injds, \"conf_level\") * 100  injds_tot_cis |>    select(1, 9, 2, 10) |>    kable(digits = 2,         col.names = c(\"Incidence\",  paste0(conf_level, \"% CI for \\\\(I_r\\\\)\"),                        \"Burden\",     paste0(conf_level, \"% CI for \\\\(I_{br}\\\\)\"))) injstats_pertype <- injsummary(injd, var_type_injury = \"injury_type\", quiet = T) injstats_pertype[[\"overall\"]] injstats_pertype[[\"overall\"]] |>    select(1:5, 7:11) |>    mutate(ninjuries2 = paste0(ninjuries, \" (\", percent_ninjuries, \")\"),          ndayslost2 = paste0(ndayslost, \" (\", percent_dayslost, \")\"),          median_dayslost2 = paste0(median_dayslost, \" (\", iqr_dayslost, \")\")) |>    select(1, 11:13, 8:10) |>    arrange(desc(injburden)) |>    kable(digits = 2,         col.names = c(\"Type of injury\", \"N injuries (%)\", \"N days lost (%)\",                       \"Median days lost (IQR)\",                       \"Total exposure\", \"Incidence\", \"Burden\"),         row.names = TRUE) |>    kable_styling(full_width = FALSE)"},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"injprev","dir":"Articles","previous_headings":"In practice","what":"- injprev()","title":"Estimate Measures of Injury Epidemiology","text":"calculate injury prevalence proportions injury-free players season basis: Making use knitr::kable(): Overall, injured players 18-19 season previous season. Let’s calculate monthly: Looking monthly basis, differences w.r.t. player availability Liverpool FC 1st male team, winter January/February months. injured players 18-19 season. Season 2017/2018 Season 2018/2019","code":"df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") prev_table1 <- injprev(injd, by = \"season\") prev_table1 #> # A tibble: 4 × 5 #>   season           type_injury     n n_player  prop #>   <fct>            <fct>       <int>    <int> <dbl> #> 1 season 2017/2018 Available       7       23  30.4 #> 2 season 2017/2018 Injured        16       23  69.6 #> 3 season 2018/2019 Available       2       19  10.5 #> 4 season 2018/2019 Injured        17       19  89.5 kable(prev_table1,       col.names = c(\"Season\", \"Status\", \"N\", \"Total\", \"%\")) prev_table2 <- injprev(injd, by = \"monthly\")  ## compare two seasons July and August prev_table2 |>   group_by(season) |>    slice(1:4) #> # A tibble: 8 × 6 #> # Groups:   season [2] #>   season           month type_injury     n n_player  prop #>   <fct>            <fct> <fct>       <int>    <int> <dbl> #> 1 season 2017/2018 Jul   Available      21       23  91.3 #> 2 season 2017/2018 Jul   Injured         2       23   8.7 #> 3 season 2017/2018 Aug   Available      18       23  78.3 #> 4 season 2017/2018 Aug   Injured         5       23  21.7 #> 5 season 2018/2019 Jul   Available      16       19  84.2 #> 6 season 2018/2019 Jul   Injured         3       19  15.8 #> 7 season 2018/2019 Aug   Available      15       19  78.9 #> 8 season 2018/2019 Aug   Injured         4       19  21.1   ## compare two seasons January and February prev_table2 |>   group_by(season) |>    slice(13:16) #> # A tibble: 8 × 6 #> # Groups:   season [2] #>   season           month type_injury     n n_player  prop #>   <fct>            <fct> <fct>       <int>    <int> <dbl> #> 1 season 2017/2018 Jan   Available      18       23  78.3 #> 2 season 2017/2018 Jan   Injured         5       23  21.7 #> 3 season 2017/2018 Feb   Available      21       23  91.3 #> 4 season 2017/2018 Feb   Injured         2       23   8.7 #> 5 season 2018/2019 Jan   Available       9       19  47.4 #> 6 season 2018/2019 Jan   Injured        10       19  52.6 #> 7 season 2018/2019 Feb   Available      12       19  63.2 #> 8 season 2018/2019 Feb   Injured         7       19  36.8 prev_table3 <- injprev(injd, by = \"monthly\", var_type_injury = \"injury_type\") ## season 1 prev_table3 |>    filter(season == \"season 2017/2018\", month == \"Jan\") |>    kable(col.names = c(\"Season\", \"Month\", \"Status\", \"N\", \"Total\", \"%\"),         caption = \"Season 2017/2018\") |>    kable_styling(full_width = FALSE, position = \"float_left\") ## season 2 prev_table3 |>    filter(season == \"season 2018/2019\", month == \"Jan\") |>    kable(col.names = c(\"Season\", \"Month\", \"Status\", \"N\", \"Total\", \"%\"),         caption = \"Season 2018/2019\") |>    kable_styling(full_width = FALSE, position = \"left\")"},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"further-implementation","dir":"Articles","previous_headings":"","what":"Further implementation","title":"Estimate Measures of Injury Epidemiology","text":"near future available negative binomial (method = \"negbin\" argument), zero-inflated poisson (“zinfpois”) zero-inflated negative binomial (\"zinfnb\") methods injsummary() function. Finally, document shows perform descriptive analyses injury epidemiology, naturally, following analyses statistical inferences multivariate regression analyses may chosen infer player’s/athletes population properties (e.g. test whether differences injury incidence rates two cohorts) evaluate influence independent factors (e.g. previous injuries, workload) injuries occurred.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/estimate-epi-measures.html","id":"notes","dir":"Articles","previous_headings":"","what":"Notes","title":"Estimate Measures of Injury Epidemiology","text":"NOTE 1: Bahr, Clarsen, Ekstrand (2018) state, injury incidence (likelihood) injury burden (severity) reported assessed conjunction rather isolation. regard, see risk matrix plot provided gg_injriskmatrix() function. NOTE 2: neither injury incidence (\\(I_r\\)) injury burden (\\(I_{br}\\)) ratios, interpreted probability; rates unit (person-time)\\(^{-1}\\) (e.g. per 1000h player-exposure, per player-season etc.). NOTE 3: Waldén et al. (2023) point , incidence-based measures provide standard time-window population risk (injuries per hour) preferable measures time risk varies across individuals (injuries per athletic-exposure, injuries per number matches), time-based measures better facilitate comparison across sports.","code":""},{"path":[]},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-i.html","id":"exploring-the-distribution-of-injuries","dir":"Articles","previous_headings":"","what":"Exploring the distribution of injuries","title":"Model Sports Injuries as Counts","text":"plot histograms injury incidence injury burden variables season.  following, use injds1718p data.","code":"## 17/18 df_exposures1718 <- prepare_exp(df_exposures0 =                                    raw_df_exposures |> filter(season == \"17/18\"),                                 player        = \"player_name\",                                 date          = \"year\",                                 time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date)) df_injuries1718 <- prepare_inj(df_injuries0   =                                  raw_df_injuries |> filter(season == \"17/18\"),                                player         = \"player_name\",                                date_injured   = \"from\",                                date_recovered = \"until\") injd1718 <- prepare_all(data_exposures = df_exposures1718,                         data_injuries  = df_injuries1718,                         exp_unit = \"matches_minutes\") ## 18/19 df_exposures1819 <- prepare_exp(df_exposures0 =                                    raw_df_exposures |> filter(season == \"18/19\"),                                 player        = \"player_name\",                                 date          = \"year\",                                 time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date)) df_injuries1819 <- prepare_inj(df_injuries0   =                                   raw_df_injuries |> filter(season == \"18/19\"),                                player         = \"player_name\",                                date_injured   = \"from\",                                date_recovered = \"until\") injd1819 <- prepare_all(data_exposures = df_exposures1819,                         data_injuries  = df_injuries1819,                         exp_unit = \"matches_minutes\") ## calculate injury summary statistics injds1718 <- injsummary(injd1718, quiet = T) injds1819 <- injsummary(injd1819, quiet = T)  injds1718p <- injds1718$playerwise injds1819p <- injds1819$playerwise  injdsp <- bind_rows(\"Season 17-18\" = injds1718p,                     \"Season 18-19\" = injds1819p,                     .id = \"season\") ## plot p1 <- ggplot(data = injdsp) +    geom_histogram(aes(x = injincidence, fill = season)) +    facet_wrap(~season) +   scale_fill_manual(name = \"\", values = c(\"#E7B800\", \"#2E9FDF\")) +   ylab(\"Number of players\") +    xlab(\"Incidence (number of injuries per 100 player-match)\") +   ggtitle(\"Histogram of injury incidence in each season\") +    theme(legend.position = \"none\")  p2 <- ggplot(data = injdsp) +    geom_histogram(aes(x = injburden, fill = season)) +    facet_wrap(~season) +   scale_fill_manual(name = \"\", values = c(\"#E7B800\", \"#2E9FDF\")) +   ylab(\"Number of players\") +    xlab(\"Burden (number of days lost due to injury per 100 player-match)\") +   ggtitle(\"Histogram of injury burden in each season\") +    theme(legend.position = \"none\")  grid.arrange(p1, p2, ncol = 1) theme_counts <- theme(axis.text = element_text(size = rel(1.2)),                       axis.title = element_text(size = rel(1.3)),                       strip.text = element_text(size = rel(1.4)),                       plot.title = element_text(size = rel(1.4)),                       legend.text = element_text(size =  rel(1.3)),                       legend.title = element_text(size = rel(1.3))) p1 <- p1 + theme_counts p2 <- p2 + theme_counts"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-i.html","id":"poisson-mixed-model","dir":"Articles","previous_headings":"","what":"- Poisson (mixed) model","title":"Model Sports Injuries as Counts","text":"merge injds1718p data frame player-related information (.e. positionb, age, assists, goals, yellows etc.) available raw_df_exposures data frame. fit Poisson regression model injury incidence (considering positionb covariate), : alternatively, can use glmmTMB::glmmTMB function: Besides, repeated measurements injdsp, can fit Mixed Model via: can analogue burden, e.g.: now, lets stick model burden_glm_pois lets interpret model output. estimated coefficients :","code":"## 17/18 df_exposures1718 <- prepare_exp(df_exposures0 =                                    raw_df_exposures |> filter(season == \"17/18\"),                                 player        = \"player_name\",                                 date          = \"year\",                                 time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date))  injds1718p <- injds1718p |>    mutate(seasonb = \"2017/2018\") |>    ## join to have info, such as position, age, citizenship etc.   left_join(df_exposures1718, by = c(\"player\" = \"player\",                                       \"seasonb\" = \"seasonb\")) |>    ## create positionb column    ## (so that the categories are: Attack, Defender, Goalkeeper and Midfield)   mutate(positionb = factor(str_split_i(position, \"_\", 1))) ## quit Goalkeepers injds1718p <- dplyr::filter(injds1718p, positionb != \"Goalkeeper\") |>    droplevels() incidence_glm_pois <- glm(ninjuries ~ positionb, # + offset(log(totalexpo))                           offset = log(totalexpo),                           data = injds1718p,                           family = poisson) # incidence_glm_pois2 <- glmmTMB(formula = ninjuries ~ foot,  #                                offset = log(totalexpo),  #                                family = poisson(), data = injds1718p) # summary(incidence_glm_pois2) df_exposures <- prepare_exp(df_exposures0 = raw_df_exposures,                                 player        = \"player_name\",                                 date          = \"year\",                                 time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date))  injdsp <- injdsp |>    mutate(seasonb = if_else(season == \"Season 17-18\", \"2017/2018\", \"2018/2019\")) |>    ## join to have info, such as position, age, citizenship etc.   left_join(df_exposures, by = c(\"player\" = \"player\",                                  \"seasonb\" = \"seasonb\")) |>    ## create positionb column    ## (so that the categories are: Attack, Defender, Goalkeeper and Midfield)   mutate(positionb = factor(str_split_i(position, \"_\", 1))) |>    droplevels() incidence_glmm_pois <- glmer(formula = ninjuries ~ positionb + (1 | player),                              offset = log(totalexpo),                              data = injdsp,                              family = poisson) # incidence_glmm_pois2 <- glmmTMB::glmmTMB(formula = ninjuries ~ positionb + (1 | player),  #                                          offset = log(totalexpo), #                                          data = injdsp, #                                          family = poisson) burden_glm_pois <- glm(ndayslost ~ positionb, offset = log(totalexpo), ## or ~ foot                        data = injds1718p,                        family = poisson) summary(burden_glm_pois) #>  #> Call: #> glm(formula = ndayslost ~ positionb, family = poisson, data = injds1718p,  #>     offset = log(totalexpo)) #>  #> Coefficients: #>                   Estimate Std. Error z value Pr(>|z|)     #> (Intercept)       -3.81936    0.06651 -57.422   <2e-16 *** #> positionbDefender -0.03227    0.08893  -0.363    0.717     #> positionbMidfield  1.01561    0.07780  13.054   <2e-16 *** #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> (Dispersion parameter for poisson family taken to be 1) #>  #>     Null deviance: 2622.1  on 20  degrees of freedom #> Residual deviance: 2327.1  on 18  degrees of freedom #> AIC: 2417.3 #>  #> Number of Fisher Scoring iterations: 6 cbind(estimate = exp(coef(burden_glm_pois)) * c(90*100, 1, 1),        exp(confint(burden_glm_pois)) * c(90*100, 1, 1)) |> # (to report per 100 player-matches)   kable() #> Waiting for profiling to be done..."},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-i.html","id":"negative-binomial-model","dir":"Articles","previous_headings":"","what":"- Negative Binomial model","title":"Model Sports Injuries as Counts","text":"","code":"burden_glm_nb <- glm.nb(ndayslost ~ positionb + offset(log(totalexpo)),                            data = injds1718p) summary(burden_glm_nb) #>  #> Call: #> glm.nb(formula = ndayslost ~ positionb + offset(log(totalexpo)),  #>     data = injds1718p, init.theta = 0.2625149285, link = log) #>  #> Coefficients: #>                   Estimate Std. Error z value Pr(>|z|)     #> (Intercept)        -2.9829     0.7404  -4.029  5.6e-05 *** #> positionbDefender  -0.8857     1.0139  -0.874    0.382     #> positionbMidfield   1.1416     1.0882   1.049    0.294     #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> (Dispersion parameter for Negative Binomial(0.2625) family taken to be 1) #>  #>     Null deviance: 27.799  on 20  degrees of freedom #> Residual deviance: 24.105  on 18  degrees of freedom #> AIC: 200.83 #>  #> Number of Fisher Scoring iterations: 1 #>  #>  #>               Theta:  0.2625  #>           Std. Err.:  0.0804  #>  #>  2 x log-likelihood:  -192.8270"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-i.html","id":"zero-inflated-poisson-model","dir":"Articles","previous_headings":"","what":"- Zero-inflated Poisson model","title":"Model Sports Injuries as Counts","text":"","code":"burden_zinfpois <- zeroinfl(ndayslost ~ positionb | positionb,                              offset = log(totalexpo),                              data = injds1718p,                              link = \"logit\",                              dist = \"poisson\",                              trace = FALSE, EM = FALSE) ## Or: # burden_zinfpois <- glmmTMB::glmmTMB(formula = ndayslost ~ 1 +  positionb, #                                     offset = log(totalexpo), #                                     ziformula = ~ 1 + positionb, #                                     data = injds1718p, #                                     family = poisson) summary(burden_zinfpois) #>  #> Call: #> zeroinfl(formula = ndayslost ~ positionb | positionb, data = injds1718p,  #>     offset = log(totalexpo), dist = \"poisson\", link = \"logit\", trace = FALSE,  #>     EM = FALSE) #>  #> Pearson residuals: #>    Min     1Q Median     3Q    Max  #> -2.186 -1.385 -1.028  1.840 19.448  #>  #> Count model coefficients (poisson with log link): #>                   Estimate Std. Error z value Pr(>|z|)     #> (Intercept)       -3.38576    0.06652 -50.897   <2e-16 *** #> positionbDefender -0.21247    0.08894  -2.389   0.0169 *   #> positionbMidfield  0.77310    0.07781   9.936   <2e-16 *** #>  #> Zero-inflation model coefficients (binomial with logit link): #>                   Estimate Std. Error z value Pr(>|z|) #> (Intercept)        -0.2877     0.7638  -0.377    0.706 #> positionbDefender  -0.8109     1.1181  -0.725    0.468 #> positionbMidfield  -1.3218     1.3354  -0.990    0.322 #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1  #>  #> Number of iterations in BFGS optimization: 1  #> Log-likelihood: -929.5 on 6 Df"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-i.html","id":"zero-inflated-negative-binomial-model","dir":"Articles","previous_headings":"","what":"- Zero-inflated Negative Binomial model","title":"Model Sports Injuries as Counts","text":"","code":"burden_zinfnb <- zeroinfl(ndayslost ~ positionb | positionb,                              offset = log(totalexpo),                              data = injds1718p,                              link = \"logit\",                              dist = \"negbin\",                              trace = FALSE, EM = FALSE) ## Or: # burden_zinfnb <- glmmTMB::glmmTMB(ndayslost ~ 1 + positionb, offset = log(totalexpo), #                                      ziformula = ~ 1 + positionb, #                                      data = injds1718p, #                                      family = nbinom2) summary(burden_zinfnb) #>  #> Call: #> zeroinfl(formula = ndayslost ~ positionb | positionb, data = injds1718p,  #>     offset = log(totalexpo), dist = \"negbin\", link = \"logit\", trace = FALSE,  #>     EM = FALSE) #>  #> Pearson residuals: #>     Min      1Q  Median      3Q     Max  #> -0.6477 -0.5554 -0.4596  0.2243  2.3967  #>  #> Count model coefficients (negbin with log link): #>                   Estimate Std. Error z value Pr(>|z|)     #> (Intercept)        -2.5214     0.6870  -3.670 0.000243 *** #> positionbDefender  -1.1727     0.8795  -1.333 0.182437     #> positionbMidfield   0.8246     0.9205   0.896 0.370337     #> Log(theta)         -0.6520     0.4735  -1.377 0.168550     #>  #> Zero-inflation model coefficients (binomial with logit link): #>                   Estimate Std. Error z value Pr(>|z|) #> (Intercept)        -0.5269     0.9143  -0.576    0.564 #> positionbDefender  -1.1295     1.6186  -0.698    0.485 #> positionbMidfield  -1.3187     1.6114  -0.818    0.413 #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1  #>  #> Theta = 0.521  #> Number of iterations in BFGS optimization: 12  #> Log-likelihood: -95.24 on 7 Df"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-i.html","id":"model-comparison","dir":"Articles","previous_headings":"","what":"Model comparison","title":"Model Sports Injuries as Counts","text":"Finally, lets compare four models. compute conditional predicted mean probabilities model: display histogram data examine fits:  Besides, compute goodness fit measures AIC, BIC deviance explained: According measures, Negative Binomial model (burden_glm_nb) fits data best.","code":"## pois ## predprob: for each subj, prob of observing each value phat_pois <- predprob(burden_glm_pois)  phat_pois_mn <- apply(phat_pois, 2, mean)  ## nb phat_nb <- predprob(burden_glm_nb)            phat_nb_mn <- apply(phat_nb, 2, mean)  ## zinfpois phat_zinfpois <- predprob(burden_zinfpois)             phat_zinfpois_mn <- apply(phat_zinfpois, 2, mean)  ## zinfnb phat_zinfnb <- predprob(burden_zinfnb)            phat_zinfnb_mn <- apply(phat_zinfnb, 2, mean)   ## put in a data frame idx <- seq(1, 62, length.out = 30) df_probs <- data.frame(phat_pois_mn     = phat_pois_mn[idx],                        phat_nb_mn       = phat_nb_mn[idx],                        phat_zinfpois_mn = phat_zinfpois_mn[idx],                        phat_zinfnb_mn   = phat_zinfnb_mn[idx],                         x= idx) |>    tidyr::gather(key = \"prob_type\", value = \"value\", -x) |>    mutate(prob_type = factor(prob_type)) ggplot(data = injds1718p) +    geom_histogram(aes(x = injburden/100, after_stat(density)),                   breaks = seq(-0.5, 62, length.out = 30),                  col = \"black\", alpha = 0.5) +   geom_point(data = df_probs, aes(x = x, y = value,                                    group = prob_type, col = prob_type)) +    geom_line(data = df_probs, aes(x = x, y = value,                                   group = prob_type, col = prob_type)) +    ylim(c(0, 0.3)) + xlab(\"Injury burden\") + ylab(\"Density\") +   scale_color_manual(name = \"Model:\",                      labels = c(\"Negative Binomial\", \"Poisson\",                                 \"Zero-Inflated Negative Binomial\",                                 \"Zero-Inflated Poisson\"),                      values = c(\"darkblue\", \"chocolate\", \"purple\", \"red\")) +   ggtitle(\"Histogram of injury burden in 2017/2018\\nwith conditional Poisson, NB, ZIP and ZINB Densities\") +   theme_counts +   theme(legend.position = c(0.7, 0.7)) models <- list(\"Poisson model\" = burden_glm_pois,                \"Negative binomial model\" = burden_glm_nb,                \"Zero-inflated Poisson model\" = burden_zinfpois,                \"Zero-inflated Negative Binomial model\" = burden_zinfnb)  res_gof <- lapply(models, function(model) {   aic      <- AIC(model)   bic      <- BIC(model)   if (class(model)[[1]] == \"zeroinfl\") {     deviance <- -2*logLik(model)[[1]]     null_model <- update(model, .~ -positionb)     null_deviance <- -2*logLik(null_model)[[1]]   } else {     deviance <- model$deviance     null_deviance <- model$null.deviance   }   dev_expl <- (null_deviance - deviance)/null_deviance * 100   return(res = data.frame(aic = aic, bic = bic, dev_expl = dev_expl)) }) res_gof |>      bind_rows(.id = \"model\") |>     ## arrange them according to dev_expl.   arrange(desc(dev_expl)) |>    knitr::kable(digits = 2,                col.names = c(\"Model\", \"AIC\", \"BIC\", \"Deviance Explained\"))"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"brief-background","dir":"Articles","previous_headings":"","what":"Brief background","title":"Model Sports Injuries as Events","text":"approach possible players followed course time, since consider injuries time--event outcome variables. Broadly speaking, define outcome variable, \\(T\\), “time occurrence injury (event)”. , data analysis regularly performed without knowing injury event times (e.g. study might finished players experiencing injury players may drop study), leads incomplete observations known censoring (.e. observe \\(Y = \\min(T, C)\\), \\(C\\) censorship variable). following two sections, first show application well-known Kaplan-Meier method Cox Proportional Hazards (Cox PH) model sports injury data , describe two possible survival modelling strategies take account recurrence injuries (repeated observations per player).","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"methods-for-time-to-first-injury","dir":"Articles","previous_headings":"","what":"Methods for time to first injury","title":"Model Sports Injuries as Events","text":"prepare data separate season injd object observation (row) corresponding time first injury (end season, transfer another team, .e. censored observation). final data frames called injd1718_sub injd1819_sub.","code":"## 17/18 df_exposures1718 <- prepare_exp(df_exposures0 =                                    raw_df_exposures |> filter(season == \"17/18\"),                                 player        = \"player_name\",                                 date          = \"year\",                                 time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date)) df_injuries1718 <- prepare_inj(df_injuries0   =                                  raw_df_injuries |> filter(season == \"17/18\"),                                player         = \"player_name\",                                date_injured   = \"from\",                                date_recovered = \"until\") injd1718 <- prepare_all(data_exposures = df_exposures1718,                         data_injuries  = df_injuries1718,                         exp_unit = \"matches_minutes\")  injd1718 <- injd1718 |>    mutate(seasonb = date2season(tstart)) |>    ## join to have info such as position, age, citizenship etc.   left_join(df_exposures1718, by = c(\"player\" = \"player\",                                       \"seasonb\" = \"seasonb\"))   ## create injd1718_sub: ##  - time to first injury ##  - equivalent tstart and tstop in calendar days injd1718_sub <- injd1718 |>    mutate(tstop_day = as.numeric(difftime(tstop, tstart, units = \"days\"))) %>%   group_by(player) |>  ## important   mutate(tstop_day = cumsum(tstop_day),          tstart_day = lag(tstop_day, default = 0)) |>    ungroup() |>    dplyr::select(player:tstop_minPlay, tstart_day, tstop_day, everything()) |>    filter(enum == 1) ## time to first injury ## 18/19 df_exposures1819 <- prepare_exp(df_exposures0 =                                    raw_df_exposures |> filter(season == \"18/19\"),                                 player        = \"player_name\",                                 date          = \"year\",                                 time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date)) df_injuries1819 <- prepare_inj(df_injuries0   =                                   raw_df_injuries |> filter(season == \"18/19\"),                                player         = \"player_name\",                                date_injured   = \"from\",                                date_recovered = \"until\") injd1819 <- prepare_all(data_exposures = df_exposures1819,                         data_injuries  = df_injuries1819,                         exp_unit = \"matches_minutes\")  injd1819 <- injd1819 |>    mutate(seasonb = date2season(tstart)) |>    ## join to have info such as position, age, citizenship etc.   left_join(df_exposures1819, by = c(\"player\" = \"player\",                                       \"seasonb\" = \"seasonb\"))   ## create injd1819_sub: ##  - time to first injury ##  - equivalent tstart and tstop in calendar days injd1819_sub <- injd1819 |>    mutate(tstop_day = as.numeric(difftime(tstop, tstart, units = \"days\"))) %>%   group_by(player) |>  ## important   mutate(tstop_day = cumsum(tstop_day),          tstart_day = lag(tstop_day, default = 0)) |>    ungroup() |>    dplyr::select(player:tstop_minPlay, tstart_day, tstop_day, everything()) |>    filter(enum == 1) ## time to first injury ## CHECK any(injd1718_sub$tstop_day == injd1718_sub$tstart_day) #> [1] FALSE any(injd1718_sub$tstop_minPlay == injd1718_sub$tstart_minPlay) #> [1] FALSE any(injd1819_sub$tstop_day == injd1819_sub$tstart_day) #> [1] FALSE any(injd1819_sub$tstop_minPlay == injd1819_sub$tstart_minPlay) #> [1] FALSE"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"kaplan-meier-curve","dir":"Articles","previous_headings":"Methods for time to first injury","what":"Kaplan-Meier curve","title":"Model Sports Injuries as Events","text":"section join data sets row: Now, estimate survival probabilities, \\(\\hat{S}_{\\text{KM}}(t)\\), season, follows: number first-time injuries seasons similar (16 vs. 17), median survival probability lower 2018/2019 season, .e. 2018/2019 estimated probability injury free 106-th day 50% (equivalently, estimated probability surviving 106 days (three months half) 50%), whereas 2017/2019 probability surviving time 69.57%. Next, plot Kaplan-Meier (KM) curves season based results via survminer::ggsurvplot function:  Let’s add information previous plot, estimated median survival probability.  Finally, add risk table graph, plus p-value obtained log-rank test (tests difference survival probabilities 17/18 18/19 season), following.  statistical differences regarding survival probabilities first-time injuries seasons.","code":"injd_sub <- bind_rows(\"17-18\" = injd1718_sub,                       \"18-19\" = injd1819_sub,                       .id = \"season\") fit <- survfit(Surv(tstart_day, tstop_day, status) ~ seasonb,                data = injd_sub) fit #> Call: survfit(formula = Surv(tstart_day, tstop_day, status) ~ seasonb,  #>     data = injd_sub) #>  #>                    n events median 0.95LCL 0.95UCL #> seasonb=2017/2018 23     16    265     152      NA #> seasonb=2018/2019 19     17    106      84     165 ggsurvplot(fit, data = injd_sub,            palette = c(\"#E7B800\", \"#2E9FDF\")) + ## colors for the curves   xlab(\"Time [calendar days]\") +    ylab(expression(\"Survival probability  (\"*hat(S)[KM](t)*\")\")) +   ggtitle(\"Kaplan-Meier curves\",            subtitle = \"in each season (time to first injury)\") ## since tstop_day == (tstop_day - tstart_day) all(injd_sub$tstop_day == (injd_sub$tstop_day - injd_sub$tstart_day)) # [1] TRUE  ## equivalent fits: fit <- survfit(Surv(tstart_day, tstop_day, status) ~ seasonb, data = injd_sub) fit <- survfit(Surv(tstop_day, status) ~ seasonb, data = injd_sub) ggsurv <- ggsurvplot(fit, data = injd_sub,            palette = c(\"#E7B800\", \"#2E9FDF\"),            surv.median.line = \"hv\",            ggtheme = theme_bw(),            break.time.by = 60,            xlim = c(0, 370),            legend.labs = c(\"Season 17/18\", \"Season 18/19\")) +   xlab(\"Time [calendar days]\") +   ylab(expression(\"Survival probability  (\"*hat(S)[KM](t)*\")\")) +   ggtitle(\"Kaplan-Meier curves\",            subtitle = \"in each season (time to first injury)\")   # add median survival estimates ggsurv$plot <- ggsurv$plot +   annotate(\"text\",             x = 70, y = 0.4,            label = expression(hat(S)[18/19]*\"(106)=0.5\"),            col = \"#2E9FDF\") +     annotate(\"text\",             x = 230, y = 0.4,            label = expression(hat(S)[17/18]*\"(265)=0.5\"),            col = \"#E7B800\")  ggsurv$plot <- ggsurv$plot +    theme(plot.title = element_text(size = rel(1.5)),         plot.subtitle = element_text(size = rel(1.5)),         axis.title = element_text(size = rel(1.3)),         axis.text = element_text(size = rel(1.3)),         legend.title = element_blank(),         legend.text = element_text(size = rel(1.2)))  ggsurv ggsurv <- ggsurvplot(fit, data = injd_sub,             palette = c(\"#E7B800\", \"#2E9FDF\"),            risk.table = T,            conf.int = T,              pval = T,            surv.median.line = \"hv\",            risk.table.col = \"strata\",             ggtheme = theme_bw(),            break.time.by = 60,            fontsize = 5.5,            xlim = c(0, 370),            legend.labs = c(\"Season 17/18\", \"Season 18/19\"),            legend.title = \"\") +   xlab(\"Time [calendar days]\") +   ylab(expression(\"Survival probability  (\"*hat(S)[KM](t)*\")\")) +   ggtitle(\"Kaplan-Meier curves\",            subtitle = \"in each season (time to first injury)\")   # add median survival estimates ggsurv$plot <- ggsurv$plot +   annotate(\"text\",             x = 70, y = 0.4,            label = expression(hat(S)[18/19]*\"(106)=0.5\"),            col = \"#2E9FDF\") +     annotate(\"text\",             x = 230, y = 0.4,            label = expression(hat(S)[17/18]*\"(265)=0.5\"),            col = \"#E7B800\") # quit title and y text of the risk table ggsurv$table <- ggsurv$table +    ggtitle(\"Number of players at risk\") +    theme(plot.subtitle = element_blank(),         axis.title.y = element_blank(),         plot.title = element_text(size = rel(1.5)),         axis.title.x = element_text(size = rel(1.3)),         axis.text = element_text(size = rel(1.3)))  ggsurv$plot <- ggsurv$plot +    theme(plot.title = element_text(size = rel(1.5)),         plot.subtitle = element_text(size = rel(1.5)),         axis.title = element_text(size = rel(1.3)),         axis.text = element_text(size = rel(1.3)),         legend.title = element_blank(),         legend.text = element_text(size = rel(1.2)))    ggsurv"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"cox-ph-model","dir":"Articles","previous_headings":"Methods for time to first injury","what":"Cox PH model","title":"Model Sports Injuries as Events","text":"can fit Cox PH model relates covariates (\\(\\boldsymbol{x}\\)) injury outcome hazard function \\(\\lambda(t | \\boldsymbol{x}) = \\lambda_0(t)\\exp(\\boldsymbol{x}'\\boldsymbol{\\beta})\\). use injd1819_sub data section add another variable (.e. positionb). Now, fit Cox PH model three covariates: player position (excluding goalkeepers), age yellow cards received player 18/19 season. estimated effects cfit model : results meaningful interesting, probably due small sample size data. summary can displayed graphically (hazard ratios 95% confidence intervals, together p-values covariate, information goodness fit model) :  , can check proportional hazards assumption Cox PH model hold computing Schoenfeld residuals: PH assumption violated seen output (GLOBAL p-value). Let’s check residuals covariate model graphically:","code":"## create positionb column  ## (so that the categories are: Attack, Defender, Goalkeeper and Midfield) injd1819_sub <- mutate(injd1819_sub,                    positionb = factor(str_split_i(position, \"_\", 1))) cfit <- coxph(Surv(tstop_day, status) ~ positionb + age + yellows,               data = injd1819_sub |>                  filter(positionb != \"Goalkeeper\") |> droplevels()) summary(cfit) #> Call: #> coxph(formula = Surv(tstop_day, status) ~ positionb + age + yellows,  #>     data = droplevels(filter(injd1819_sub, positionb != \"Goalkeeper\"))) #>  #>   n= 18, number of events= 17  #>  #>                      coef exp(coef) se(coef)     z Pr(>|z|)   #> positionbDefender 0.58324   1.79183  0.80661 0.723   0.4696   #> positionbMidfield 1.33266   3.79112  0.70604 1.888   0.0591 . #> age               0.02391   1.02419  0.09937 0.241   0.8099   #> yellows           0.03909   1.03986  0.20752 0.188   0.8506   #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #>                   exp(coef) exp(-coef) lower .95 upper .95 #> positionbDefender     1.792     0.5581    0.3687     8.707 #> positionbMidfield     3.791     0.2638    0.9501    15.127 #> age                   1.024     0.9764    0.8429     1.244 #> yellows               1.040     0.9617    0.6924     1.562 #>  #> Concordance= 0.629  (se = 0.072 ) #> Likelihood ratio test= 4.05  on 4 df,   p=0.4 #> Wald test            = 3.88  on 4 df,   p=0.4 #> Score (logrank) test = 4.27  on 4 df,   p=0.4 ggforest(model = cfit,          data = injd1819_sub |>             filter(positionb != \"Goalkeeper\") |>             droplevels() |>             as.data.frame(),          fontsize = 1.2) cox.zph(cfit) #>           chisq df    p #> positionb 1.465  2 0.48 #> age       2.578  1 0.11 #> yellows   0.315  1 0.57 #> GLOBAL    5.961  4 0.20 ggcoxzph(cox.zph(cfit))"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"models-for-time-to-subsequent-injuries","dir":"Articles","previous_headings":"","what":"Models for time to (subsequent) injuries","title":"Model Sports Injuries as Events","text":"following models useful account heterogeneity among different observations group subjects.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"stratified-cox-ph-model","dir":"Articles","previous_headings":"Models for time to (subsequent) injuries","what":"Stratified Cox PH model","title":"Model Sports Injuries as Events","text":"fit stratified Cox PH model, use (previously prepared) injd_sub data, seasonb column two levels. model fit different baseline hazard function level (stratum) seasonb covariate (strata), .e. \\(\\lambda(t | \\boldsymbol{x}) = \\lambda_{0,k}(t)\\exp(\\boldsymbol{x}'\\boldsymbol{\\beta})\\) \\(k = 1, 2\\). effect age, \\(\\widehat{\\text{HR}}_{\\text{age}} = \\exp(\\hat{\\beta}_{\\text{age}}) = 1.02\\), significant. However, keep illustrate plot estimates two players different ages, 18 year-old vs. 36 year-old seasons, based fitted stratified model. First, put wanted estimates data frame. , plot :  proportional hazard assumption strata doesn’t hold:","code":"sfit <- coxph(Surv(tstart_day, tstop_day, status) ~ age + strata(seasonb),                data = injd_sub) summary(sfit) #> Call: #> coxph(formula = Surv(tstart_day, tstop_day, status) ~ age + strata(seasonb),  #>     data = injd_sub) #>  #>   n= 42, number of events= 33  #>  #>        coef exp(coef) se(coef)     z Pr(>|z|) #> age 0.01749   1.01764  0.05541 0.316    0.752 #>  #>     exp(coef) exp(-coef) lower .95 upper .95 #> age     1.018     0.9827    0.9129     1.134 #>  #> Concordance= 0.6  (se = 0.069 ) #> Likelihood ratio test= 0.1  on 1 df,   p=0.8 #> Wald test            = 0.1  on 1 df,   p=0.8 #> Score (logrank) test = 0.1  on 1 df,   p=0.8 ## surv estimates of a player of 18 year-old based on sfit player1 <- data.frame(age = 18) sfitn1 <- survfit(sfit, newdata = player1) sfitn1 <- data.frame(surv = sfitn1$surv,                       time = sfitn1$time,                      strata = c(rep(names(sfitn1$strata)[[1]], sfitn1$strata[[1]]),                                 rep(names(sfitn1$strata)[[2]], sfitn1$strata[[2]])),                      age = 18)  ## surv estimates of a player of 36 year-old based on sfit player2 <- data.frame(age = 36)  sfitn2 <- survfit(sfit, newdata = player2) sfitn2 <- data.frame(surv = sfitn2$surv,                       time = sfitn2$time,                      strata = c(rep(names(sfitn2$strata)[[1]], sfitn2$strata[[1]]),                                 rep(names(sfitn2$strata)[[2]], sfitn2$strata[[2]])),                      age = 36)   ## bind both data frames sfitn <- bind_rows(sfitn1, sfitn2) |>    mutate(strata = factor(strata),          Age = factor(age)) ggplot(sfitn, aes(x = time, y = surv, col = strata)) +   geom_step(aes(linetype = Age)) +   scale_color_manual(name = \"Season\", values = c(\"#E7B800\", \"#2E9FDF\")) +   xlab(\"t [calendar days]\") + ylab(expression(hat(S)(t))) +   theme(legend.title = element_text(size = rel(1.3)),         legend.text = element_text(size = rel(1.3)),         axis.text = element_text(size = rel(1.4)),         axis.title = element_text(size = rel(1.4))) cox.zph(sfit) #>        chisq df     p #> age        6  1 0.014 #> GLOBAL     6  1 0.014"},{"path":"https://lzumeta.github.io/injurytools/articles/model-injury-data-ii.html","id":"shared-frailty-model","dir":"Articles","previous_headings":"Models for time to (subsequent) injuries","what":"Shared frailty model","title":"Model Sports Injuries as Events","text":"Shared frailty models allow model dependence several survival times frailty term shared survival times pertaining player , general, cluster. way, survival times player sustains multiple injuries level frailty attached . expressed \\(\\lambda(t | \\boldsymbol{x}, \\alpha) = \\lambda_{0}(t)\\exp(\\boldsymbol{x}'\\boldsymbol{\\beta})\\alpha_l = \\lambda_{0}(t)\\exp(\\boldsymbol{x}'\\boldsymbol{\\beta} + b_l)\\) \\(l = 1, \\ldots, L\\) players, \\(\\alpha = \\exp(b)\\) usually follows Gamma log-normal distribution. Code data set-: Now, fit shared frailty model frailty term follows Gamma distribution using frailty(player) syntax inside survival::coxph function’s formula: alternatively, can use coxme package (packages also) fit model log-normal frailty using (1 | player) syntax: model also called random intercepts model, since frailty term acts multiplicative way hazard (“intercept” curve). estimated variance random effect \\(\\hat{\\sigma}^2=\\) 2.69 p-value frailty term significant. Let’s plot covariate effects, .e hazard ratios, frailty terms sffit model:  models section might extended model data present different cluster structures hierarchical levels, e.g. players team, club, league etc.","code":"## prepare exposure data set and create seasonb column df_exposures <- prepare_exp(df_exposures0 = raw_df_exposures,                              player        = \"player_name\",                              date          = \"year\",                              time_expo     = \"minutes_played\") |>    mutate(seasonb = date2season(date))  ## add more info to injd data frame (based on exposure data) injd <- injd |>    mutate(seasonb = date2season(tstart)) |>    left_join(df_exposures, by = c(\"player\" = \"player\",                                   \"seasonb\" = \"seasonb\")) |>    mutate(positionb = factor(str_split_i(position, \"_\", 1)),          injury_severity = addNA(injury_severity),          days_lost = lag(days_lost, default = 0),          games_lost = lag(games_lost, default = 0),          prev_inj = lag(enum, default = 0)) injd <- injd |>    mutate(tstop_minPlay = ifelse(tstop_minPlay == tstart_minPlay,                                 tstop_minPlay + 1, tstop_minPlay)) |>    filter(positionb != \"Goalkeeper\") |>    droplevels() sffit <- coxph(Surv(tstart_minPlay, tstop_minPlay, status) ~                   age + days_lost +                   frailty(player, distribution = \"gamma\"), data = injd) sffit2 <- coxme(Surv(tstart_minPlay, tstop_minPlay, status) ~                    age + days_lost + (1 | player), data = injd) summary(sffit) #> Call: #> coxph(formula = Surv(tstart_minPlay, tstop_minPlay, status) ~  #>     age + days_lost + frailty(player, distribution = \"gamma\"),  #>     data = injd) #>  #>   n= 104, number of events= 81  #>  #>                           coef      se(coef) se2      Chisq  DF    p       #> age                        0.489503 0.278965            3.08  1.00 7.9e-02 #> days_lost                 -0.006381 0.009761 0.006744   0.43  1.00 5.1e-01 #> frailty(player, distribut                             230.57 15.72 3.3e-40 #>  #>           exp(coef) exp(-coef) lower .95 upper .95 #> age          1.6315     0.6129    0.9443     2.819 #> days_lost    0.9936     1.0064    0.9748     1.013 #>  #> Iterations: 10 outer, 184 Newton-Raphson #>      Variance of random effect= 2.673384   I-likelihood = -171.4  #> Degrees of freedom for terms= -2.3  0.5 15.7  #> Concordance= 0.882  (se = 0.026 ) #> Likelihood ratio test= 122.5  on 13.88 df,   p=<2e-16 summary(sffit2) #> Cox mixed-effects model fit by maximum likelihood #>   Data: injd #>   events, n = 81, 104 #>   Iterations= 21 111  #>                     NULL Integrated   Fitted #> Log-likelihood -190.7449  -164.8804 -122.959 #>  #>                    Chisq    df          p   AIC   BIC #> Integrated loglik  51.73  3.00 3.4212e-11 45.73 38.55 #>  Penalized loglik 135.57 21.69 0.0000e+00 92.20 40.27 #>  #> Model:  Surv(tstart_minPlay, tstop_minPlay, status) ~ age + days_lost +      (1 | player)  #> Fixed coefficients #>                  coef exp(coef)   se(coef)     z     p #> age        0.52986625 1.6987051 0.22283770  2.38 0.017 #> days_lost -0.01228762 0.9877876 0.01001641 -1.23 0.220 #>  #> Random effects #>  Group  Variable  Std Dev   Variance  #>  player Intercept  3.472957 12.061429 ## plot p1, for covariate effects ## a trick to not to plot frailties as HRs sffit_aux <- sffit attr(sffit_aux$terms, \"dataClasses\") <-    attr(sffit_aux$terms, \"dataClasses\")[1:3]  p1 <- ggforest(sffit_aux, data = injd,                fontsize = 0.8) ## plot p2, for frailty terms df_frailties <- data.frame(player = levels(injd$player),                             frail = sffit$frail,                            expfrail = exp(sffit$frail),                            col = factor(ifelse(sffit$frail >= 0, 1, 0))) p2 <- ggplot(df_frailties) +   geom_segment(aes(x = player, xend = player,                     y = 1, yend = expfrail, col = col)) +   geom_hline(yintercept = 1) +    geom_text(aes(x = player, y = expfrail + 0.12*sign(frail), label = player),             size = 3, angle = 30) +   scale_color_manual(name = \"\", values = c(\"darkred\", \"dodgerblue\")) df_frailties <- data.frame(player = levels(injd$player),                             frail = sffit$frail,                            expfrail = exp(sffit$frail),                            col = factor(ifelse(sffit$frail >= 0, 1, 0))) p2 <- ggplot(df_frailties) +   geom_segment(aes(x = player, xend = player,                    y = 1, yend = expfrail, col = col)) +   geom_hline(yintercept = 1) +    geom_text(aes(x = player, y = expfrail + 0.12*sign(frail), label = player),             size = 3, angle = 15) +   scale_color_manual(name = \"\", values = c(\"darkred\", \"dodgerblue\")) +    scale_x_discrete(expand = c(0.08, 0)) +   scale_y_continuous(expand = c(0.2, 0)) +    ylab(expression(exp*\"(frail)\")) + xlab(\"Player\") +   ggtitle(\"Frailties\") +    theme(legend.position = \"none\",         axis.ticks.x = element_blank(),         axis.text.x = element_blank(),         axis.title = element_text(size = rel(1.2)),         axis.text.y = element_text(size = rel(1.2)),         plot.title = element_text(size = rel(1.4), hjust = 0.5)) grid.arrange(p1, p2, nrow = 2, heights = c(1, 1.3))"},{"path":"https://lzumeta.github.io/injurytools/articles/prepare-injury-data.html","id":"starting-point","dir":"Articles","previous_headings":"","what":"Starting point","title":"Prepare Sports Injury Data","text":"Data can collected several ways several means. conventional manner collect store data events occur. , regard sports medicine, common store injury records one hand, side, data related training competitions/matches (exposure time among others) separate table. Following , consider user raw data two separate data sets call injury exposure data, respectively1.","code":""},{"path":"https://lzumeta.github.io/injurytools/articles/prepare-injury-data.html","id":"prepare-and-standardize-injury-and-exposure-data","dir":"Articles","previous_headings":"","what":"1) prepare and standardize injury and exposure data","title":"Prepare Sports Injury Data","text":"Thus early task tidy two sources data. example data sets consider raw_df_injuries raw_df_exposures data sets available injurytools package. data Liverpool Football Club male’s first team players two consecutive seasons, 2017-2018 2018-2019, scrapped https://www.transfermarkt.com/ website: standardize key column names : player (subject) identifier, dates injury recovery (), training/match/season date amount time exposure. set proper names formats means prepare_inj() prepare_exp()2. suggest collecting exposure time fine scale possible, .e. minutes desired unit total time spent training participating competitions/matches. However, units “seasons”, :","code":"head(raw_df_injuries) #> # A tibble: 6 × 11 #>   player_name player_id season from       until      days_lost games_lost injury #>   <fct>       <fct>     <fct>  <date>     <date>         <dbl>      <dbl> <chr>  #> 1 adam-lalla… 43530     17/18  2017-07-31 2017-11-25       117         21 Hamst… #> 2 adam-lalla… 43530     17/18  2018-03-31 2018-05-13        43         11 Hamst… #> 3 adam-lalla… 43530     18/19  2018-09-04 2018-10-19        45          7 Groin… #> 4 adam-lalla… 43530     18/19  2018-11-09 2018-12-04        25          4 Knock  #> 5 adam-lalla… 43530     18/19  2019-01-06 2019-01-18        12          2 Knock  #> 6 adam-lalla… 43530     18/19  2019-04-01 2019-05-31        60         10 Knock  #> # ℹ 3 more variables: injury_acl <fct>, injury_type <fct>, #> #   injury_severity <fct> head(raw_df_exposures) #>               player_name player_id season year matches_played minutes_played #> 1            adam-lallana     43530  17/18 2017             12            236 #> 2            adam-lallana     43530  18/19 2018             13            464 #> 3          alberto-moreno    207917  17/18 2017             16           1264 #> 4 alex-oxlade-chamberlain    143424  17/18 2017             32           1483 #> 5                 alisson    105470  18/19 2018             38           3420 #> 6        andrew-robertson    234803  17/18 2017             22           1943 #>      liga    club_name club_id age height place citizenship #> 1 premier fc-liverpool      31  29   1.72  <NA>        <NA> #> 2 premier fc-liverpool      31  30   1.72  <NA>        <NA> #> 3 premier fc-liverpool      31  25   1.71  <NA>        <NA> #> 4 premier fc-liverpool      31  24   1.75  <NA>        <NA> #> 5 premier fc-liverpool      31  26   1.91  <NA>        <NA> #> 6 premier fc-liverpool      31  23   1.78  <NA>        <NA> #>                     position  foot goals assists yellows reds #> 1 Midfield_AttackingMidfield  both     0       0       1    0 #> 2 Midfield_AttackingMidfield  both     0       0       1    0 #> 3          Defender_LeftBack  left     0       0       1    0 #> 4   Midfield_CentralMidfield right     3       7       3    0 #> 5                 Goalkeeper right     0       0       1    0 #> 6          Defender_LeftBack  left     1       5       2    0 df_injuries <- prepare_inj(df_injuries0   = raw_df_injuries,                            player         = \"player_name\",                            date_injured   = \"from\",                            date_recovered = \"until\") df_exposures <- prepare_exp(df_exposures0 = raw_df_exposures,                             player        = \"player_name\",                             date          = \"year\",                             time_expo     = \"minutes_played\") ## a possible way for the case where each row in exposure data correspond to a ## season and there is no more information about time of exposure raw_df_exposures$time_expo_aux <- 1  df_exposures2 <- prepare_exp(df_exposures0 = raw_df_exposures,                              player        = \"player_name\",                              date          = \"year\",                              time_expo     = \"time_expo_aux\")  ## note 'tstart_s' and 'tstop_s' columns injd <-  prepare_all(data_exposures = df_exposures2,                      data_injuries  = df_injuries,                      exp_unit = \"seasons\") head(injd) #> # A tibble: 6 × 19 #>   player t0         tf         date_injured date_recovered tstart     tstop      #>   <fct>  <date>     <date>     <date>       <date>         <date>     <date>     #> 1 adam-… 2017-07-01 2019-06-30 2017-07-31   2017-11-25     2017-07-01 2017-07-31 #> 2 adam-… 2017-07-01 2019-06-30 2018-03-31   2018-05-13     2017-11-25 2018-03-31 #> 3 adam-… 2017-07-01 2019-06-30 2018-09-04   2018-10-19     2018-05-13 2018-09-04 #> 4 adam-… 2017-07-01 2019-06-30 2018-11-09   2018-12-04     2018-10-19 2018-11-09 #> 5 adam-… 2017-07-01 2019-06-30 2019-01-06   2019-01-18     2018-12-04 2019-01-06 #> 6 adam-… 2017-07-01 2019-06-30 2019-04-01   2019-05-31     2019-01-18 2019-04-01 #> # ℹ 12 more variables: tstart_s <dbl>, tstop_s <dbl>, status <dbl>, enum <dbl>, #> #   days_lost <dbl>, player_id <fct>, season <fct>, games_lost <dbl>, #> #   injury <chr>, injury_acl <fct>, injury_type <fct>, injury_severity <fct>"},{"path":"https://lzumeta.github.io/injurytools/articles/prepare-injury-data.html","id":"integrate-both-sources-of-data","dir":"Articles","previous_headings":"","what":"2) integrate both sources of data","title":"Prepare Sports Injury Data","text":", apply prepare_all() data sets tidied . important specify unit exposure, .e. exp_unit argument, must one “minutes”, “hours”, “days”, “matches_num”, “matches_minutes”, “activity_days” “seasons”. outcome prepared data set, structured suitable way ready use statistical modelling approaches. data set always columns listed (standardized columns created function), well (optional) sports-related variables. player: player identifier. t0 tf: follow-period corresponding player, .e. player’s first last dates observed (value player). date_injured date_recovered: dates injury recovery corresponding observation (). Otherwise NA. tstart tstop: beginning ending dates corresponding interval observation risk injury. tstart_xand tstop_x: beginning ending times corresponding interval observation risk injury (depends unit exposure time specified). status: injury (event) indicator. enum: integer indicating recurrence number, .e. \\(k\\)-th injury (event), observation risk. days_lost: number days lost due injury occurred tstop/date_injured (; otherwise 0), .e. date_recovered - date_injured days. example first row injd corresponds player Adam Lallana, risk set starts 2017-07-01 ends 2017-07-31, played 236 minutes, got firstly (enum = 1) injured (status = 1). second row corresponds risk set injured second injury (enum = 2), set starts fully recovered 2017-11-23 finishes suffered another hamstring injury3.","code":"injd <-  prepare_all(data_exposures = df_exposures,                     data_injuries  = df_injuries,                     exp_unit = \"matches_minutes\") head(injd) #> # A tibble: 6 × 19 #>   player t0         tf         date_injured date_recovered tstart     tstop      #>   <fct>  <date>     <date>     <date>       <date>         <date>     <date>     #> 1 adam-… 2017-07-01 2019-06-30 2017-07-31   2017-11-25     2017-07-01 2017-07-31 #> 2 adam-… 2017-07-01 2019-06-30 2018-03-31   2018-05-13     2017-11-25 2018-03-31 #> 3 adam-… 2017-07-01 2019-06-30 2018-09-04   2018-10-19     2018-05-13 2018-09-04 #> 4 adam-… 2017-07-01 2019-06-30 2018-11-09   2018-12-04     2018-10-19 2018-11-09 #> 5 adam-… 2017-07-01 2019-06-30 2019-01-06   2019-01-18     2018-12-04 2019-01-06 #> 6 adam-… 2017-07-01 2019-06-30 2019-04-01   2019-05-31     2019-01-18 2019-04-01 #> # ℹ 12 more variables: tstart_minPlay <dbl>, tstop_minPlay <dbl>, status <dbl>, #> #   enum <dbl>, days_lost <dbl>, player_id <fct>, season <fct>, #> #   games_lost <dbl>, injury <chr>, injury_acl <fct>, injury_type <fct>, #> #   injury_severity <fct> # injd |>  #   group_by(player) |>  #   slice(1, n())"},{"path":"https://lzumeta.github.io/injurytools/articles/prepare-injury-data.html","id":"the-prepared-data-set-an-injd-object","dir":"Articles","previous_headings":"","what":"The prepared data set, an injd object","title":"Prepare Sports Injury Data","text":"final data set ’s R object class injd, following attributes: unit_exposure: character indicating unit exposure time used object. follow_up: data frame consisting one row per player first last dates observed (t0 tf columns). data_exposures: preprocessed exposure data frame. data_injuries: preprocessed injury data frame. extract one attributes, example unit_exposure, type:","code":"class(injd) #> [1] \"injd\"       \"tbl_df\"     \"tbl\"        \"data.frame\" str(injd, 1) #> injd [108 × 19] (S3: injd/tbl_df/tbl/data.frame) #>  - attr(*, \"unit_exposure\")= chr \"matches_minutes\" #>  - attr(*, \"follow_up\")= tibble [28 × 3] (S3: tbl_df/tbl/data.frame) #>  - attr(*, \"data_exposures\")='data.frame':   42 obs. of  19 variables: #>  - attr(*, \"data_injuries\")= tibble [82 × 11] (S3: tbl_df/tbl/data.frame) attr(injd, \"unit_exposure\") #> [1] \"matches_minutes\""},{"path":"https://lzumeta.github.io/injurytools/articles/visualize-injury-data.html","id":"a-quick-glance","dir":"Articles","previous_headings":"","what":"A quick glance","title":"Visualize Sports Injury Data","text":"Let’s count many injuries (red crosses graph) occurred severe (length thick black line). Overall Injury incidence injury burden reported 100 player-matches Overall per type injury Injury incidence injury burden reported 100 player-matches Let’s plot information shown second table risk matrix displays injury incidence injury burden.","code":"gg_injphoto(injd,              title   = \"Overview of injuries:\\nLiverpool FC 1st male team during 2017-2018 and 2018-2019 seasons\",             by_date = \"2 month\",              fix     = TRUE) +      ## plus some lines of ggplot2 code..   xlab(\"Follow-up date\") + ylab(\"Players\") + labs(caption = \"source: transfermarkt.com\") +   theme(plot.title = element_text(face = \"bold\", hjust = 0.5, size = 22),         axis.text.x.bottom = element_text(size = 13, angle = 20, hjust = 1),         axis.text.y.left   = element_text(size = 12),         axis.title.x       = element_text(size = 20, face = \"bold\", vjust = -1),         axis.title.y       = element_text(size = 20, face = \"bold\", vjust = 1.8),         legend.text        = element_text(size = 20),         plot.caption       = element_text(face = \"italic\", size = 12, colour = \"gray10\")) # warnings set to FALSE injds        <- injsummary(injd)  injds_perinj <- injsummary(injd, var_type_injury = \"injury_type\")  # injds injds[[\"overall\"]] |>    mutate(incidence_new = paste0(round(injincidence, 2), \" (\", round(injincidence_lower, 2), \",\", round(injincidence_upper, 2), \")\"),          burden_new    = paste0(round(injburden, 2), \" (\", round(injburden_lower, 2), \",\", round(injburden_upper, 2), \")\")) |>    dplyr::select(1:2, 6, incidence_new, burden_new) |>    kable(col.names = c(\"N injuries\", \"N days lost\", \"Total expo\", \"Incidence (95% CI)\", \"Burden (95% CI)\"),         caption   = \"Injury incidence and injury burden are reported as 100 player-matches\",         align     = \"c\")  injds_perinj[[\"overall\"]] |>    mutate(incidence_new = paste0(round(injincidence, 2), \" (\", round(injincidence_lower, 2), \",\", round(injincidence_upper, 2), \")\"),          burden_new    = paste0(round(injburden, 2), \" (\", round(injburden_lower, 2), \",\", round(injburden_upper, 2), \")\")) |>    dplyr::select(1:2, 4, 9, incidence_new, burden_new) |>    kable(col.names = c(\"Type of injury\", \"N injuries\", \"N days lost\", \"Total expo\", \"Incidence (95% CI)\", \"Burden (95% CI)\"),         caption   = \"Injury incidence and injury burden are reported as 100 player-matches\",         align     = \"c\") # warnings set to FALSE gg_injriskmatrix(injds_perinj,                   var_type_injury = \"injury_type\",                   title = \"Risk matrix\") # warnings set to FALSE palette <- c(\"#000000\", \"#E69F00\", \"#56B4E9\", \"#009E73\",              \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\") # source of the palette: http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/ theme3 <- theme(plot.title = element_text(face = \"bold\", hjust = 0.5, size = 20),                 axis.text.x.bottom = element_text(size = 18),                 axis.text.y.left = element_text(size = 18),                 axis.title.x = element_text(size = 15),                 axis.title.y = element_text(size = 15),                 legend.title = element_text(size = 15),                 legend.text = element_text(size = 15))  gg_injriskmatrix(injds_perinj,                   var_type_injury = \"injury_type\",                   title = \"Risk matrix\") +   scale_fill_manual(name = \"Type of injury\",                     values = palette[c(7, 8, 2:3, 5)]) +   theme3"},{"path":"https://lzumeta.github.io/injurytools/articles/visualize-injury-data.html","id":"comparing-injuries-occurred-in-1718-vs--1819","dir":"Articles","previous_headings":"","what":"Comparing injuries occurred in 17/18 vs. 18/19","title":"Visualize Sports Injury Data","text":"prepare two injd objects:  Let’s compute injury summary statistics season. Season 2017/2018 Injury incidence injury burden reported 100 player-matches Season 2018/2019 Injury incidence injury burden reported 100 player-matches","code":"# warnings set to FALSE injd1 <- cut_injd(injd, datef = 2017) injd2 <- cut_injd(injd, date0 = 2018) ## Plot just for checking whether cut_injd() worked well p1 <- gg_injphoto(injd1, fix = TRUE, by_date = \"3 months\") p2 <- gg_injphoto(injd2, fix = TRUE, by_date = \"3 months\") grid.arrange(p1, p2, ncol = 2) # warnings set to FALSE injds1 <- injsummary(injd1) injds2 <- injsummary(injd2) ## **Season 2017/2018** injds1[[\"overall\"]] |>    mutate(incidence_new = paste0(round(injincidence, 2), \" (\", round(injincidence_lower, 2), \",\", round(injincidence_upper, 2), \")\"),          burden_new    = paste0(round(injburden, 2), \" (\", round(injburden_lower, 2), \",\", round(injburden_upper, 2), \")\")) |>    dplyr::select(1:2, 6, incidence_new, burden_new) |>    kable(col.names = c(\"N injuries\", \"N days lost\", \"Total expo\", \"Incidence (95% CI)\", \"Burden (95% CI)\"),         caption   = \"Injury incidence and injury burden are reported as 100 player-matches\",         align     = \"c\")  ## **Season 2018/2019** injds2[[\"overall\"]] |>    mutate(incidence_new = paste0(round(injincidence, 2), \"  (\", round(injincidence_lower, 2), \",\", round(injincidence_upper, 2), \")\"),          burden_new    = paste0(round(injburden, 2), \"  (\", round(injburden_lower, 2), \",\", round(injburden_upper, 2), \")\")) |>    dplyr::select(1:2, 6, incidence_new, burden_new) |>    kable(col.names = c(\"N injuries\", \"N days lost\", \"Total expo\", \"Incidence (95% CI)\", \"Burden (95% CI)\"),         caption   = \"Injury incidence and injury burden are reported as 100 player-matches\",         align     = \"c\")"},{"path":"https://lzumeta.github.io/injurytools/articles/visualize-injury-data.html","id":"who-were-the-most-injured-players-and-the-most-severely-affected","dir":"Articles","previous_headings":"Comparing injuries occurred in 17/18 vs. 18/19","what":"- Who were the most injured players? And the most severely affected?","title":"Visualize Sports Injury Data","text":"Player-wise statistics can extracted injds2 <- injsummary(injd1); injds2[[1]] (injds2[[\"playerwise\"]]). , plot :","code":"p11 <- gg_injbarplot(injds1) p12 <- gg_injbarplot(injds1, type = \"burden\") p21 <- gg_injbarplot(injds2) p22 <- gg_injbarplot(injds2, type = \"burden\")   # grid.arrange(p11, p21, p12, p22, nrow = 2) theme2 <- theme(plot.title = element_text(face = \"bold\", hjust = 0.5, size = 26),                 axis.text.x.bottom = element_text(size = 18),                 axis.text.y.left = element_text(size = 13),                 axis.title.x = element_text(size = 11, vjust = 1),                 axis.title.y = element_text(size = 22, face = \"bold\", vjust = 1))  p11 <- p11 +    xlab(\"Injury incidence\") +    ylab(\"Player-wise incidence (injuries per 100 player-match)\") +   ggtitle(\"2017/2018 season\") +   scale_y_continuous(limits = c(0, 80)) + ## same x axis    theme2 +   theme(plot.margin = margin(0.2, 0.2, 0.2, 0.5, \"cm\")) p12 <- p12 +   xlab(\"Injury burden\") +    ylab(\"Player-wise burden (days lost per 100 player-match)\") +   scale_y_continuous(limits = c(0, 6110)) +    theme2 +   theme(plot.margin = margin(0.2, 0.2, 0.2, 0.65, \"cm\"))  p21 <- p21 +    ylab(\"Player-wise incidence (injuries per 100 player-match)\") +   ggtitle(\"2018/2019 season\") +   scale_y_continuous(limits = c(0, 80)) +    theme2  p22 <- p22 +   ylab(\"Player-wise burden (days lost per 100 player-match)\") +   scale_y_continuous(limits = c(0, 6110)) +    theme2  grid.arrange(p11, p21, p12, p22, nrow = 2)"},{"path":"https://lzumeta.github.io/injurytools/articles/visualize-injury-data.html","id":"which-injuries-were-more-frequent-and-more-burdensome","dir":"Articles","previous_headings":"Comparing injuries occurred in 17/18 vs. 18/19","what":"- Which injuries were more frequent? And more burdensome?","title":"Visualize Sports Injury Data","text":"","code":"# warnings set to FALSE ## Calculate summary statistics injds1_perinj <- injsummary(injd1, var_type_injury = \"injury_type\") injds2_perinj <- injsummary(injd2, var_type_injury = \"injury_type\")  ## Plot p1 <- gg_injriskmatrix(injds1_perinj, var_type_injury = \"injury_type\",                         title = \"Season 2017/2018\", add_contour = FALSE) p2 <- gg_injriskmatrix(injds2_perinj, var_type_injury = \"injury_type\",                        title = \"Season 2018/2019\", add_contour = FALSE)  # Print both plots side by side # grid.arrange(p1, p2, nrow = 1) palette <- c(\"#000000\", \"#E69F00\", \"#56B4E9\", \"#009E73\",              \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\") # source of the palette: http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/ theme3 <- theme(plot.title = element_text(face = \"bold\", hjust = 0.5, size = 20),                 axis.text.x.bottom = element_text(size = 18),                 axis.text.y.left = element_text(size = 18),                 axis.title.x = element_text(size = 15),                 axis.title.y = element_text(size = 15),                 legend.title = element_text(size = 15),                 legend.text = element_text(size = 15))  ## Plot p1 <- gg_injriskmatrix(injds1_perinj, var_type_injury = \"injury_type\",                         title = \"Season 2017/2018\", add_contour = T,                        cont_max_x = 6, cont_max_y = 130, ## after checking the data                        bins = 15)  p2 <- gg_injriskmatrix(injds2_perinj, var_type_injury = \"injury_type\",                        title = \"Season 2018/2019\", add_contour = T,                         cont_max_x = 6, cont_max_y = 130,                        bins = 15)  p1 <- p1 +   scale_x_continuous(limits = c(0, 5.5)) +   scale_y_continuous(limits = c(0, 125)) +    scale_fill_manual(name = \"Type of injury\",                     values = palette[c(8, 2:3, 5)]) + # get rid off the green (pos: 4)   theme3 p2 <- p2 +   scale_x_continuous(limits = c(0, 5.5)) +   scale_y_continuous(limits = c(0, 125)) +    scale_fill_manual(name = \"Type of injury\",                     values = palette[c(7, 8, 2:3, 5)]) + # keep the same color coding   theme3  grid.arrange(p1, p2, ncol = 2,               top = textGrob(\"Risk matrices\", gp = gpar(fontsize = 26, font = 2))) ## for the main title"},{"path":"https://lzumeta.github.io/injurytools/articles/visualize-injury-data.html","id":"how-many-players-were-injury-free-in-each-month","dir":"Articles","previous_headings":"Comparing injuries occurred in 17/18 vs. 18/19","what":"- How many players were injury free in each month?","title":"Visualize Sports Injury Data","text":"plot polar area diagrams2.","code":"gg_injprev_polar(injd, by = \"monthly\") theme4 <- theme(plot.title = element_text(face = \"bold\", hjust = 0.5, size = 20),                 axis.text.x = element_text(size = 16),                 axis.text.y = element_text(size = 18),                 legend.title = element_text(size = 20),                 legend.text = element_text(size = 20),                 strip.text = element_text(size = 20))   gg_injprev_polar(injd, by = \"monthly\",             title = \"Proportion of injured and available\\n players in each month\") +   scale_fill_manual(name = \"Type of injury\",                      values = c(\"seagreen3\", \"red3\")) +    theme4 gg_injprev_polar(injd, by = \"monthly\", var_type_injury = \"injury_type\") palette2 <- c(\"seagreen3\", \"#000000\", \"#E69F00\", \"#56B4E9\", \"#009E73\",              \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\") # source of the palette: http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/   gg_injprev_polar(injd, by = \"monthly\",              var_type_injury = \"injury_type\",             title = \"Proportion of injured and available\\n players in each month according to the type of injury\") +   scale_fill_manual(name = \"Type of injury\",                      values = palette2[c(1, 8:9, 3:4, 6)]) +    theme4"},{"path":"https://lzumeta.github.io/injurytools/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Lore Zumeta Olaskoaga. Author, maintainer. Dae-Jin Lee. Author.","code":""},{"path":"https://lzumeta.github.io/injurytools/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Zumeta Olaskoaga L, Lee D (2023). injurytools: Toolkit Sports Injury Data Analysis. https://github.com/lzumeta/injurytools, https://lzumeta.github.io/injurytools/.","code":"@Manual{,   title = {injurytools: A Toolkit for Sports Injury Data Analysis},   author = {Lore {Zumeta Olaskoaga} and Dae-Jin Lee},   year = {2023},   note = {https://github.com/lzumeta/injurytools, https://lzumeta.github.io/injurytools/}, }"},{"path":[]},{"path":"https://lzumeta.github.io/injurytools/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"A Toolkit for Sports Injury Data Analysis","text":"injurytools package aimed Sports Medicine facilitates data analysis workflow providing convenience functions handy tools sports injury data. functions can classified (sports injury) data preparation, descriptive analyses data visualization routines. analyses, estimation risk injury covariate effects, can performed outside injurytools, whether event injury (outcome variable) seen count time--event data. get overview package, see Articles section. practice, package can help automate certain descriptive reports routinely made sports injury surveillance.","code":""},{"path":"https://lzumeta.github.io/injurytools/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A Toolkit for Sports Injury Data Analysis","text":"install CRAN: install current version GitHub:","code":"install.packages(\"injurytools\") devtools::install_github(\"lzumeta/injurytools\")"},{"path":"https://lzumeta.github.io/injurytools/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"A Toolkit for Sports Injury Data Analysis","text":"functions contain start inj*() stands injury. Functions data preparation start prepare_*(); data visualization gg_inj*(). outlines glance injurytools can help get comprehensive picture injury data:","code":"library(injurytools) library(ggplot2)  gg_injphoto(injd,              title   = \"Overview of injuries:\\nLiverpool FC 1st male team during 2017-2018 and 2018-2019 seasons\",             by_date = \"2 month\") +   ## plus some lines of ggplot2 code..   xlab(\"Follow-up date\") + ylab(\"Players\") +    labs(caption = \"source: transfermarkt.com\") +   theme(plot.title = element_text(face = \"bold\", hjust = 0.5, size = 22),         axis.text.x.bottom = element_text(size = 13, angle = 20, hjust = 1),         axis.text.y.left   = element_text(size = 12),         axis.title.x = element_text(size = 20, face = \"bold\", vjust = -1),         axis.title.y = element_text(size = 20, face = \"bold\", vjust = 1.8),         legend.text  = element_text(size = 20),         plot.caption = element_text(face = \"italic\", size = 12, colour = \"gray10\"))"},{"path":"https://lzumeta.github.io/injurytools/index.html","id":"how-to-contribute","dir":"","previous_headings":"","what":"How to contribute","title":"A Toolkit for Sports Injury Data Analysis","text":"problems package, find bugs suggestions improvements, please feel free open GitHub issue touch us directly via email. Also want give us feedback.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/check_injfollowup.html","id":null,"dir":"Reference","previous_headings":"","what":"Check the dates in injury data and exposure data — check_injfollowup","title":"Check the dates in injury data and exposure data — check_injfollowup","text":"Check dates injury data within dates exposure data.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/check_injfollowup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check the dates in injury data and exposure data — check_injfollowup","text":"","code":"check_injfollowup(followup_df, data_injuries)"},{"path":"https://lzumeta.github.io/injurytools/reference/check_injfollowup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check the dates in injury data and exposure data — check_injfollowup","text":"followup_df Data frame created inside prepare_all() function. data_injuries Data frame given prepare_all() function.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/check_injfollowup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check the dates in injury data and exposure data — check_injfollowup","text":"injury data cut injury data dates injury occurrences within dates player's follow-period.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/cut_injd.html","id":null,"dir":"Reference","previous_headings":"","what":"Cut the range of the follow-up — cut_injd","title":"Cut the range of the follow-up — cut_injd","text":"Given injd object, cut range time period limits observed dates, first last observed dates, date0 datef, respectively. possible specify just one date, .e. two dates range necessarily entered. See Note section.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/cut_injd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cut the range of the follow-up — cut_injd","text":"","code":"cut_injd(injd, date0, datef)"},{"path":"https://lzumeta.github.io/injurytools/reference/cut_injd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cut the range of the follow-up — cut_injd","text":"injd Prepared data, injd object. date0 Starting date class Date numeric. numeric, refer year (e.g. date = 2018). Optional. datef Ending date. class date0. Optional.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/cut_injd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cut the range of the follow-up — cut_injd","text":"injd object shorter follow-period.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/cut_injd.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Cut the range of the follow-up — cut_injd","text":"aware modifying follow-period cohort, study design altered. function used, unless strong argument supporting . case, used caution.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/cut_injd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cut the range of the follow-up — cut_injd","text":"","code":"# Prepare data # \\donttest{ df_injuries <- prepare_inj(   df_injuries0   = raw_df_injuries,   player         = \"player_name\",   date_injured   = \"from\",   date_recovered = \"until\" )  df_exposures <- prepare_exp(   df_exposures0 = raw_df_exposures,   player        = \"player_name\",   date          = \"year\",   time_expo     = \"minutes_played\" )  injd <- prepare_all(   data_exposures = df_exposures,   data_injuries  = df_injuries,   exp_unit       = \"matches_minutes\" ) # }  # \\donttest{ cut_injd(injd, date0 = 2018) #> Warning: Injury data has been cut to the given follow-up period (in exposure data) #> # A tibble: 74 × 19 #>    player           t0         tf         date_injured date_recovered tstart     #>    <fct>            <date>     <date>     <date>       <date>         <date>     #>  1 adam-lallana     2018-07-01 2019-06-30 2018-09-04   2018-10-19     2018-07-01 #>  2 adam-lallana     2018-07-01 2019-06-30 2018-11-09   2018-12-04     2018-10-19 #>  3 adam-lallana     2018-07-01 2019-06-30 2019-01-06   2019-01-18     2018-12-04 #>  4 adam-lallana     2018-07-01 2019-06-30 2019-04-01   2019-05-31     2019-01-18 #>  5 adam-lallana     2018-07-01 2019-06-30 NA           NA             2019-05-31 #>  6 alisson          2018-07-01 2019-06-30 NA           NA             2018-07-01 #>  7 andrew-robertson 2018-07-01 2019-06-30 2018-12-03   2018-12-07     2018-07-01 #>  8 andrew-robertson 2018-07-01 2019-06-30 2019-02-25   2019-02-26     2018-12-07 #>  9 andrew-robertson 2018-07-01 2019-06-30 2019-05-08   2019-05-11     2019-02-26 #> 10 andrew-robertson 2018-07-01 2019-06-30 2019-06-12   2019-06-24     2019-05-11 #> # ℹ 64 more rows #> # ℹ 13 more variables: tstop <date>, tstart_minPlay <dbl>, tstop_minPlay <dbl>, #> #   status <dbl>, enum <dbl>, days_lost <dbl>, player_id <fct>, season <fct>, #> #   games_lost <dbl>, injury <chr>, injury_acl <fct>, injury_type <fct>, #> #   injury_severity <fct> # }"},{"path":"https://lzumeta.github.io/injurytools/reference/data_followup.html","id":null,"dir":"Reference","previous_headings":"","what":"Build follow-up data frame — data_followup","title":"Build follow-up data frame — data_followup","text":"Build follow-data frame","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/data_followup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build follow-up data frame — data_followup","text":"","code":"data_followup(data_exposures)"},{"path":"https://lzumeta.github.io/injurytools/reference/data_followup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build follow-up data frame — data_followup","text":"data_exposures Exposure data frame standardized column names, fashion prepare_exp() returns.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/data_followup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build follow-up data frame — data_followup","text":"data frame row corresponds player /first date (t0) last date (tf) observed.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/data_injurieslong.html","id":null,"dir":"Reference","previous_headings":"","what":"Transform injury data into a long format — data_injurieslong","title":"Transform injury data into a long format — data_injurieslong","text":"Transform injury data long format","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/data_injurieslong.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Transform injury data into a long format — data_injurieslong","text":"","code":"data_injurieslong(data_injuries)"},{"path":"https://lzumeta.github.io/injurytools/reference/data_injurieslong.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transform injury data into a long format — data_injurieslong","text":"data_injuries Injury data frame standardized column names, fashion prepare_inj() returns.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/data_injurieslong.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Transform injury data into a long format — data_injurieslong","text":"data_injuries data frame long format row corresponds player-event.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date2season.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the season — date2season","title":"Get the season — date2season","text":"Get season given date.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date2season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the season — date2season","text":"","code":"date2season(date)"},{"path":"https://lzumeta.github.io/injurytools/reference/date2season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the season — date2season","text":"date vector class Date integer/numeric. integer/numeric, refer year season started (e.g. date = 2015 refer 2015/2016 season)","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date2season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the season — date2season","text":"Character specifying respective competition season given date. season (output) follows pattern: \"2005/2006\".","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date2season.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the season — date2season","text":"","code":"date <- Sys.Date() date2season(date) #> [1] \"2023/2024\""},{"path":"https://lzumeta.github.io/injurytools/reference/date_format.html","id":null,"dir":"Reference","previous_headings":"","what":"Proper Conversion of Date objects — date_format","title":"Proper Conversion of Date objects — date_format","text":"Converts Date objects common format used every Date object throughout package.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date_format.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Proper Conversion of Date objects — date_format","text":"","code":"date_format(date)"},{"path":"https://lzumeta.github.io/injurytools/reference/date_format.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Proper Conversion of Date objects — date_format","text":"date Date object.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date_format.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Proper Conversion of Date objects — date_format","text":"\"%Y-%m-%d\" formatted Date object respect fixed locale time zone, .e. setting LC_TIME component C timezone UTC (safest choice, non-geographic Coordinated Universal Time).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/date_format.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Proper Conversion of Date objects — date_format","text":"limit scope changes LC_TIME timezone, temporary locale modification made using withr package.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/exp_unit_suffix.html","id":null,"dir":"Reference","previous_headings":"","what":"Obtain suffix for time exposure unit — exp_unit_suffix","title":"Obtain suffix for time exposure unit — exp_unit_suffix","text":"Obtain suffix time exposure unit","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/exp_unit_suffix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Obtain suffix for time exposure unit — exp_unit_suffix","text":"","code":"exp_unit_suffix(exp_unit)"},{"path":"https://lzumeta.github.io/injurytools/reference/exp_unit_suffix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Obtain suffix for time exposure unit — exp_unit_suffix","text":"exp_unit Character defining unit time exposure (\"minutes\" default).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/exp_unit_suffix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Obtain suffix for time exposure unit — exp_unit_suffix","text":"Character indicating respective suffix exp_unit entered.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injbarplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot player's injury incidence/burden ranking — gg_injbarplot","title":"Plot player's injury incidence/burden ranking — gg_injbarplot","text":"bar chart shows player-wise injury summary statistics, either injury incidence injury burden, ranked descending order.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injbarplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot player's injury incidence/burden ranking — gg_injbarplot","text":"","code":"gg_injbarplot(injds, type = c(\"incidence\", \"burden\"), title = NULL)"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injbarplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot player's injury incidence/burden ranking — gg_injbarplot","text":"injds injds S3 object (see injsummary()). type character value indicating whether plot injury incidence's injury burden's ranking. One \"incidence\" \"burden\", respectively. title Text main title.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injbarplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot player's injury incidence/burden ranking — gg_injbarplot","text":"ggplot object (optionally layers can added).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injbarplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot player's injury incidence/burden ranking — gg_injbarplot","text":"","code":"# \\donttest{ df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") # }  injds <- injsummary(injd) #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>   p1 <- gg_injbarplot(injds, type = \"incidence\",                     title = \"Overall injury incidence per player\") p2 <- gg_injbarplot(injds, type = \"burden\",                     title = \"Overall injury burden per player\")  # install.packages(\"gridExtra\") # library(gridExtra) if (require(\"gridExtra\")) {   gridExtra::grid.arrange(p1, p2, nrow = 1) } #> Loading required package: gridExtra"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injphoto.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot injuries over the follow-up period — gg_injphoto","title":"Plot injuries over the follow-up period — gg_injphoto","text":"Given injd S3 object plots overview injuries sustained player/athlete cohort follow-. subject timeline depicted horizontally red cross indicates exact injury date, blue circle recovery date bold black line indicates duration injury (time-loss).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injphoto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot injuries over the follow-up period — gg_injphoto","text":"","code":"gg_injphoto(injd, title = NULL, fix = FALSE, by_date = \"1 months\")"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injphoto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot injuries over the follow-up period — gg_injphoto","text":"injd Prepared data. injd object. title Text main title. fix logical value indicating whether limit range date (x scale) maximum observed exposure date limit x scale, regardless recovery dates might longer maximum observed exposure date. by_date increment date sequence x-axis tick-marks drawn. argument passed base::seq.Date().","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injphoto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot injuries over the follow-up period — gg_injphoto","text":"ggplot object (optionally layers can added).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injphoto.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot injuries over the follow-up period — gg_injphoto","text":"","code":"# \\donttest{ df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"minutes\") # }  gg_injphoto(injd, title = \"Injury Overview\", by_date = \"1 years\")"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injprev_polar.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot polar area diagrams representing players' prevalence — gg_injprev_polar","title":"Plot polar area diagrams representing players' prevalence — gg_injprev_polar","text":"Plot proportions available injured players cohort, monthly season basis, polar area diagram. information type injury may specified injured players proportions disaggregated reported according variable.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injprev_polar.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot polar area diagrams representing players' prevalence — gg_injprev_polar","text":"","code":"gg_injprev_polar(   injd,   by = c(\"monthly\", \"season\"),   var_type_injury = NULL,   title = \"Polar area diagram\\ninjured and available (healthy) players\" )"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injprev_polar.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot polar area diagrams representing players' prevalence — gg_injprev_polar","text":"injd Prepared data, injd object. Character, one \"monthly\" \"season\", specifying periodicity according calculate proportions available injured players/athletes. var_type_injury Character specifying name column basis classify injuries calculate proportions injured players. refer (categorical) variable describes \"type injury\". Defaults NULL. title Text main title.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injprev_polar.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot polar area diagrams representing players' prevalence — gg_injprev_polar","text":"ggplot object (optionally layers can added).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injprev_polar.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot polar area diagrams representing players' prevalence — gg_injprev_polar","text":"","code":"# \\donttest{ df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") # }  # \\donttest{ library(ggplot2) our_palette <- c(\"seagreen3\", \"red3\", rev(RColorBrewer::brewer.pal(5, \"Reds\"))) gg_injprev_polar(injd, by = \"monthly\", var_type_injury = \"injury_type\",             title = \"Polar area diagram\\ninjured and available (healthy) players per month\") +   scale_fill_manual(values = our_palette)  gg_injprev_polar(injd, by = \"monthly\",             title = \"Polar area diagram\\ninjured and available (healthy) players per month\") +   scale_fill_manual(values = our_palette)  # }"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injriskmatrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot risk matrices — gg_injriskmatrix","title":"Plot risk matrices — gg_injriskmatrix","text":"Given injds S3 object, depicts risk matrix plots , graph injury incidence (frequency) plotted average days lost per injury (consequence). point estimate injury incidence together confidence interval plotted, according method used running injsummary() function. y-axis, mean time-loss per injury together \\(\\pm\\) IQR (days) plotted. number shown inside point point size , report injury burden (days lost per player-exposure time), bigger size greater burden. See References section.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injriskmatrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot risk matrices — gg_injriskmatrix","text":"","code":"gg_injriskmatrix(   injds,   var_type_injury = NULL,   add_contour = TRUE,   title = NULL,   xlab = \"Incidence (injuries per _)\",   ylab = \"Mean time-loss (days) per injury\",   errh_height = 1,   errv_width = 0.05,   cont_max_x = NULL,   cont_max_y = NULL,   ... )"},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injriskmatrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot risk matrices — gg_injriskmatrix","text":"injds injds S3 object (see injsummary()) var_type_injury Character specifying name column. (categorical) variable referring \"type injury\" (e.g. muscular/articular/others overuse/-overuse etc.) according visualize injury summary statistics (optional, defaults NULL). add_contour Logical, whether add contour lines product injury incidence mean severity (.e. 'incidence x average time-loss'), leads injury burden (defaults TRUE). title Text main title passed ggplot2::ggtitle(). xlab x-axis label passed ggplot2::xlab(). ylab y-axis label passed ggplot2::ylab(). errh_height Set height horizontal interval whiskers; height argument ggplot2::geom_errorbarh(). errv_width Set width vertical interval whiskers; width argument ggplot2::geom_errorbar(). cont_max_x, cont_max_y Numerical (optional) values indicating maximum x-axis y-axis, respectively, reached contour. ... arguments passed ggplot2::geom_contour() metR::geom_text_contour(). often aesthetics like bins = 15 breaks = 10.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injriskmatrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot risk matrices — gg_injriskmatrix","text":"ggplot object (optionally layers can added).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injriskmatrix.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Plot risk matrices — gg_injriskmatrix","text":"Bahr R, Clarsen B, Derman W, et al. International Olympic Committee consensus statement: methods recording reporting epidemiological data injury illness sport 2020 (including STROBE Extension Sport Injury Illness Surveillance (STROBE-SIIS)) British Journal Sports Medicine 2020; 54:372-389. Fuller C. W. (2018). Injury Risk (Burden), Risk Matrices Risk Contours Team Sports: Review Principles, Practices Problems.Sports Medicine, 48(7), 1597–1606.  https://doi.org/10.1007/s40279-018-0913-5","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/gg_injriskmatrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot risk matrices — gg_injriskmatrix","text":"","code":"# \\donttest{ df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") # }  # \\donttest{ injds <- injsummary(injd) #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  injds2 <- injsummary(injd, var_type_injury = \"injury_type\") #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>   gg_injriskmatrix(injds)  gg_injriskmatrix(injds2, var_type_injury = \"injury_type\", title = \"Risk matrix\") #> Warning: An injury average time-loss is bigger than its 75% quartile #>     time-loss. Possibly, there is a concrete long-term injury in the data. #>     For plotting purposes the vertical upper limit (i.e. 75% quartile) #>     is lengthened to the average value.  # }"},{"path":"https://lzumeta.github.io/injurytools/reference/injd.html","id":null,"dir":"Reference","previous_headings":"","what":"Example of an injd object — injd","title":"Example of an injd object — injd","text":"injd object (S3), called injd, showcase object like also save computation time help files provided package. result applying prepare_all() raw_df_exposures (prepare_exp(raw_df_exposures, ...)) raw_df_injuries (prepare_inj(raw_df_injuries, ...)).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example of an injd object — injd","text":"","code":"injd"},{"path":"https://lzumeta.github.io/injurytools/reference/injd.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example of an injd object — injd","text":"main data frame injd gathers information 28 players 108 rows 19 columns: player Player identifier (factor) t0 Follow-period corresponding player, .e. player’s first observed date, value player (Date) tf Follow-period corresponding player, .e. player’s last observed date, value player (Date) date_injured Date injury corresponding observation (). Otherwise NA (Date) date_recovered Date recovery corresponding observation (). Otherwise NA (Date) tstart Beginning date corresponding interval observation risk injury (Date) tstop Ending date corresponding interval observation risk injury (Date) tstart_minPlay Beginning time. Minutes played matches start interval observation risk injury (numeric) tstop_minPlay Ending time. Minutes played matches finish interval observation risk injury (numeric) status injury (event) indicator (numeric) enum integer indicating recurrence number, .e. \\(k\\)-th injury (event), observation risk days_lost Number days lost due injury (numeric) player_id Identification number football player (factor) season Season player's entry corresponds (factor) games_lost Number matches lost due injury (numeric) injury Injury specification appears https://www.transfermarkt.com, ; otherwise NA (character) injury_acl Whether Anterior Cruciate Ligament (ACL) injury (NO_ACL); interval corresponds injury, NA otherwise (factor) injury_type five level categorical variable indicating type injury, whether Bone, Concussion, Ligament, Muscle Unknown; , NA otherwise (factor) injury_severity four level categorical variable indicating severity injury (), whether Minor (<7 days lost), Moderate ([7, 28) days lost), Severe ([28, 84) days lost) Very_severe (>=84 days lost); NA otherwise (factor)","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injd.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Example of an injd object — injd","text":"consists data frame plus 4 attributes: character specifying unit exposure (unit_exposure); 3 (auxiliary) data frames: follow_up, data_exposures data_injuries.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate injury prevalence — injprev","title":"Calculate injury prevalence — injprev","text":"Calculate prevalence injured players proportion non-injured (available) players cohort, monthly season basis. information type injury may specified injury-specific prevalences reported according variable.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate injury prevalence — injprev","text":"","code":"injprev(injd, by = c(\"monthly\", \"season\"), var_type_injury = NULL)"},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate injury prevalence — injprev","text":"injd Prepared data. injd object. Character. One \"monthly\" \"season\", specifying periodicity according calculate proportions available injured players/athletes. var_type_injury Character specifying name column basis classify injuries calculate proportions injured players. Defaults NULL.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate injury prevalence — injprev","text":"data frame containing one row combination season, month (optionally) injury type (var_type_injury specified, variable two categories: Available Injured). Plus, three columns, specifying proportion players (prop) satisfying corresponding row's combination values, .e. prevalence, many players injured moment type injury corresponding row (n), many players time cohort (n_player). See Note section.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Calculate injury prevalence — injprev","text":"var_type_injury specified (NULL), may happen player one month suffers two different types injuries. example, muscle ligament injury. case, two injuries contribute proportions muscle ligament injuries month, resulting overall proportion exceeds 100%. Besides, players Available category suffer injury moment (season-month), , healthy time period lasted","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Calculate injury prevalence — injprev","text":"Bahr R, Clarsen B, Derman W, et al. International Olympic Committee consensus statement: methods recording reporting epidemiological data injury illness sport 2020 (including STROBE Extension Sport Injury Illness Surveillance (STROBE-SIIS)) British Journal Sports Medicine 2020; 54:372-389.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injprev.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate injury prevalence — injprev","text":"","code":"# \\donttest{ df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") # }  injprev(injd, by = \"monthly\", var_type_injury = \"injury_type\") #> # A tibble: 98 × 6 #>    season           month type_injury     n n_player  prop #>    <fct>            <fct> <fct>       <int>    <int> <dbl> #>  1 season 2017/2018 Jul   Available      21       23  91.3 #>  2 season 2017/2018 Jul   Muscle          2       23   8.7 #>  3 season 2017/2018 Aug   Available      18       23  78.3 #>  4 season 2017/2018 Aug   Muscle          3       23  13   #>  5 season 2017/2018 Aug   Unknown         2       23   8.7 #>  6 season 2017/2018 Sep   Available      22       23  95.7 #>  7 season 2017/2018 Sep   Muscle          1       23   4.3 #>  8 season 2017/2018 Oct   Available      19       23  82.6 #>  9 season 2017/2018 Oct   Concussion      1       23   4.3 #> 10 season 2017/2018 Oct   Muscle          2       23   8.7 #> # ℹ 88 more rows injprev(injd, by = \"monthly\") #> # A tibble: 48 × 6 #>    season           month type_injury     n n_player  prop #>    <fct>            <fct> <fct>       <int>    <int> <dbl> #>  1 season 2017/2018 Jul   Available      21       23  91.3 #>  2 season 2017/2018 Jul   Injured         2       23   8.7 #>  3 season 2017/2018 Aug   Available      18       23  78.3 #>  4 season 2017/2018 Aug   Injured         5       23  21.7 #>  5 season 2017/2018 Sep   Available      22       23  95.7 #>  6 season 2017/2018 Sep   Injured         1       23   4.3 #>  7 season 2017/2018 Oct   Available      19       23  82.6 #>  8 season 2017/2018 Oct   Injured         4       23  17.4 #>  9 season 2017/2018 Nov   Available      18       23  78.3 #> 10 season 2017/2018 Nov   Injured         5       23  21.7 #> # ℹ 38 more rows injprev(injd, by = \"season\", var_type_injury = \"injury_type\") #> # A tibble: 11 × 5 #>    season           type_injury     n n_player  prop #>    <fct>            <fct>       <int>    <int> <dbl> #>  1 season 2017/2018 Available       7       23  30.4 #>  2 season 2017/2018 Concussion      3       23  13   #>  3 season 2017/2018 Ligament        4       23  17.4 #>  4 season 2017/2018 Muscle         11       23  47.8 #>  5 season 2017/2018 Unknown         8       23  34.8 #>  6 season 2018/2019 Available       2       19  10.5 #>  7 season 2018/2019 Bone           11       19  57.9 #>  8 season 2018/2019 Concussion     13       19  68.4 #>  9 season 2018/2019 Ligament        6       19  31.6 #> 10 season 2018/2019 Muscle         15       19  78.9 #> 11 season 2018/2019 Unknown        13       19  68.4 injprev(injd, by = \"season\") #> # A tibble: 4 × 5 #>   season           type_injury     n n_player  prop #>   <fct>            <fct>       <int>    <int> <dbl> #> 1 season 2017/2018 Available       7       23  30.4 #> 2 season 2017/2018 Injured        16       23  69.6 #> 3 season 2018/2019 Available       2       19  10.5 #> 4 season 2018/2019 Injured        17       19  89.5"},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate injury summary statistics — injsummary","title":"Estimate injury summary statistics — injsummary","text":"Calculate injury summary statistics injury incidence injury burden (see Bahr et al. 20), including total number injuries, number days lost due injury, total time exposure etc., means (widely used) Poisson method, negative binomial, zero-inflated poisson zero-inflated negative binomial, player overall basis.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate injury summary statistics — injsummary","text":"","code":"injsummary(   injd,   var_type_injury = NULL,   method = c(\"poisson\", \"negbin\", \"zinfpois\", \"zinfnb\"),   conf_level = 0.95,   quiet = FALSE )"},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate injury summary statistics — injsummary","text":"injd injd S3 object (see prepare_all()). var_type_injury Character specifying name column according compute injury summary statistics. refer (categorical) variable describes \"type injury\". Optional, defaults NULL. method Method estimate injury incidence injury burden. One \"poisson\", \"negbin\", \"zinfpois\" \"zinfnb\"; characters stand Poisson method, negative binomial method, zero-inflated Poisson zero-inflated negative binomial. conf_level Confidence level (defaults 0.95). quiet Logical, whether silence warning messages (defaults FALSE).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate injury summary statistics — injsummary","text":"list two data frames comprising player-wise overall injury summary statistics, respectively, constitute injds S3 object. made following columns: ninjuries: number injuries sustained player overall team given period specified injd data frame. ndayslost: number days lost player overall team due injury given period specified injd data frame. mean_dayslost: average number days lost (.e. ndayslost) playerwise overall team. median_dayslost: median number days lost (.e. ndayslost) playerwise overall team. iqr_dayslost: interquartile range number days lost (.e. ndayslost) playerwise overall team. totalexpo: total exposure player risk sustaining injury. injincidence: injury incidence, number injuries per unit exposure. injburden: injury burden, number days lost per unit exposure. var_type_injury: specified argument function. Apart column names, may include columns depending user's specifications function: percent_ninjuries: percentage (%) number injuries type relative types injuries (var_type_injury specified). percent_dayslost: percentage (%) number days lost injuries type relative total number days lost types injuries (var_type_injury specified). injincidence_sd injburden_sd: estimated standard deviation, specified method argument, injury incidence (injincidence) injury burden (injburden), overall injury summary statistics (2nd element function output). injincidence_lower injburden_lower: lower bound , example, 95% confidence interval (conf_level = 0.95) injury incidence (injincidence) injury burden (injburden), overall injury summary statistics (2nd element function output). injincidence_upper injburden_upper: (item) applies upper bound.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate injury summary statistics — injsummary","text":"Bahr R., Clarsen B., & Ekstrand J. (2018). focus burden injuries illnesses, just incidence. British Journal Sports Medicine, 52(16), 1018–1021. https://doi.org/10.1136/bjsports-2017-098160 Waldén M., Mountjoy M., McCall ., Serner ., Massey ., Tol J. L., ... & Andersen T. E. (2023). Football-specific extension IOC consensus statement: methods recording reporting epidemiological data injury illness sport 2020. British journal sports medicine.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate injury summary statistics — injsummary","text":"","code":"# \\donttest{ df_exposures <- prepare_exp(raw_df_exposures, player = \"player_name\",                             date = \"year\", time_expo = \"minutes_played\") df_injuries  <- prepare_inj(raw_df_injuries, player = \"player_name\",                             date_injured = \"from\", date_recovered = \"until\") injd         <- prepare_all(data_exposures = df_exposures,                             data_injuries  = df_injuries,                             exp_unit = \"matches_minutes\") # }  injsummary(injd) #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> $playerwise #> # A tibble: 28 × 9 #>    player         ninjuries ndayslost mean_dayslost median_dayslost iqr_dayslost #>    <fct>              <dbl>     <dbl>         <dbl>           <dbl> <chr>        #>  1 adam-lallana           6       302         43.1             43   18.5-52.5    #>  2 alberto-moreno         1        50         25               25   12.5-37.5    #>  3 alex-oxlade-c…         1       316        316              316   316-316      #>  4 alisson                0         0          0                0   0-0          #>  5 andrew-robert…         5        22          3.67             2.5 1.25-3.75    #>  6 daniel-sturri…         3       122         30.5             33.5 12-52        #>  7 danny-ings             0         0          0                0   0-0          #>  8 dejan-lovren           6       160         22.9             13   9-28.5       #>  9 divock-origi           1         5          2.5              2.5 1.25-3.75    #> 10 dominic-solan…         0         0          0                0   0-0          #> # ℹ 18 more rows #> # ℹ 3 more variables: totalexpo <dbl>, injincidence <dbl>, injburden <dbl> #>  #> $overall #> # A tibble: 1 × 14 #>   ninjuries ndayslost mean_dayslost median_dayslost iqr_dayslost totalexpo #>       <dbl>     <dbl>         <dbl>           <dbl> <chr>            <dbl> #> 1        82      2049          19.0             7.5 1-20.25          74690 #> # ℹ 8 more variables: injincidence <dbl>, injburden <dbl>, #> #   injincidence_sd <dbl>, injburden_sd <dbl>, injincidence_lower <dbl>, #> #   injincidence_upper <dbl>, injburden_lower <dbl>, injburden_upper <dbl> #>  #> attr(,\"class\") #> [1] \"injds\" \"list\"  #> attr(,\"unit_exposure\") #> [1] \"matches_minutes\" #> attr(,\"unit_timerisk\") #> [1] \"100 player-match\" #> attr(,\"conf_level\") #> [1] 0.95 injsummary(injd, var_type_injury = \"injury_type\") #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> Warning:  #>   Exposure time unit is matches_minutes #>   So... Injury incidence and injury burden are calculated per 100 player-matches of exposure (90 minutes times 100) #>  #> $playerwise #> # A tibble: 140 × 10 #>    player         injury_type ninjuries ndayslost mean_dayslost median_dayslost #>    <fct>          <fct>           <dbl>     <dbl>         <dbl>           <dbl> #>  1 adam-lallana   Bone                0         0           0                 0 #>  2 adam-lallana   Concussion          3        97          32.3              25 #>  3 adam-lallana   Ligament            0         0           0                 0 #>  4 adam-lallana   Muscle              3       205          68.3              45 #>  5 adam-lallana   Unknown             0         0           0                 0 #>  6 alberto-moreno Bone                0         0           0                 0 #>  7 alberto-moreno Concussion          0         0           0                 0 #>  8 alberto-moreno Ligament            1        50          50                50 #>  9 alberto-moreno Muscle              0         0           0                 0 #> 10 alberto-moreno Unknown             0         0           0                 0 #> # ℹ 130 more rows #> # ℹ 4 more variables: iqr_dayslost <chr>, totalexpo <dbl>, injincidence <dbl>, #> #   injburden <dbl> #>  #> $overall #> # A tibble: 5 × 17 #>   injury_type ninjuries percent_ninjuries ndayslost percent_dayslost #>   <fct>           <dbl>             <dbl>     <dbl>            <dbl> #> 1 Bone               11              13.4       173             8.44 #> 2 Concussion         16              19.5       213            10.4  #> 3 Ligament            9              11.0       596            29.1  #> 4 Muscle             25              30.5       735            35.9  #> 5 Unknown            21              25.6       332            16.2  #> # ℹ 12 more variables: mean_dayslost <dbl>, median_dayslost <dbl>, #> #   iqr_dayslost <chr>, totalexpo <dbl>, injincidence <dbl>, injburden <dbl>, #> #   injincidence_sd <dbl>, injburden_sd <dbl>, injincidence_lower <dbl>, #> #   injincidence_upper <dbl>, injburden_lower <dbl>, injburden_upper <dbl> #>  #> attr(,\"class\") #> [1] \"injds\" \"list\"  #> attr(,\"unit_exposure\") #> [1] \"matches_minutes\" #> attr(,\"unit_timerisk\") #> [1] \"100 player-match\" #> attr(,\"conf_level\") #> [1] 0.95"},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary_unit.html","id":null,"dir":"Reference","previous_headings":"","what":"Transform injsummary() output according to the unit of exposure — injsummary_unit","title":"Transform injsummary() output according to the unit of exposure — injsummary_unit","text":"Transform injsummary() output according unit exposure","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary_unit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Transform injsummary() output according to the unit of exposure — injsummary_unit","text":"","code":"injsummary_unit(unit, injds, quiet)"},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary_unit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transform injsummary() output according to the unit of exposure — injsummary_unit","text":"unit Character indicates unit exposure sports injury data. injds injds data frame transformed. quiet Logical, whether silence warning messages (defaults FALSE).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injsummary_unit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Transform injsummary() output according to the unit of exposure — injsummary_unit","text":"list two elements: () injds data frame 'injincidence' 'injburden' values transformed according unit, named injds (ii) character vector expresses unit used rates, .e. player's time risk, named unit_timerisk.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/injurytools.html","id":null,"dir":"Reference","previous_headings":"","what":"injurytools package — injurytools","title":"injurytools package — injurytools","text":"Sports Injury Data analysis aims identify describe magnitude injury problem, gain insights (e.g. determine potential risk factors) statistical modelling approaches. 'injurytools' package provides standardized routines utilities simplify analyses. offers functions data preparation, informative visualizations descriptive model-based analyses.","code":""},{"path":[]},{"path":"https://lzumeta.github.io/injurytools/reference/injurytools.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"injurytools package — injurytools","text":"Maintainer: Lore Zumeta Olaskoaga lzumeta@bcamath.org (ORCID) Authors: Dae-Jin Lee dlee@bcamath.org (ORCID)","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/is_injd.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if an object is of class injd — is_injd","title":"Check if an object is of class injd — is_injd","text":"Check object x class injd.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/is_injd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if an object is of class injd — is_injd","text":"","code":"is_injd(x)"},{"path":"https://lzumeta.github.io/injurytools/reference/is_injd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if an object is of class injd — is_injd","text":"x R object.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/is_injd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if an object is of class injd — is_injd","text":"logical value: TRUE x inherits injd class, FALSE otherwise.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/is_injds.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if an object is of class injds — is_injds","title":"Check if an object is of class injds — is_injds","text":"Check object x class injds.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/is_injds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if an object is of class injds — is_injds","text":"","code":"is_injds(x)"},{"path":"https://lzumeta.github.io/injurytools/reference/is_injds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if an object is of class injds — is_injds","text":"x R object.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/is_injds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if an object is of class injds — is_injds","text":"logical value: TRUE x inherits injds class, FALSE otherwise.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/new_injd.html","id":null,"dir":"Reference","previous_headings":"","what":"constructor of injd class — new_injd","title":"constructor of injd class — new_injd","text":"constructor injd class","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/new_injd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"constructor of injd class — new_injd","text":"","code":"new_injd(   x = data.frame(),   unit_exposure = \"match_minutes\",   follow_up = data.frame(),   data_exposures = data.frame(),   data_injuries = data.frame() )"},{"path":"https://lzumeta.github.io/injurytools/reference/new_injd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"constructor of injd class — new_injd","text":"x data frame object construct injd class object unit_exposure first attribute follow_up second attribute data_exposures third attribute data_injuries fourth attribute","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/new_injd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"constructor of injd class — new_injd","text":"new injd object","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/prepare_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare data in a standardized format — prepare_data","title":"Prepare data in a standardized format — prepare_data","text":"data preprocessing functions provided injurytools package, involve: setting exposure injury data standardized format integrating sources data adequate data structure. prepare_inj() prepare_exp() set standardized names proper classes (key) columns injury exposure data, respectively. prepare_all() integrates , standardized injury exposure data sets, convert injd S3 object adequate structure statistical analyses. See Prepare Sports Injury Data vignette details.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/prepare_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare data in a standardized format — prepare_data","text":"","code":"prepare_inj(   df_injuries0,   player = \"player\",   date_injured = \"date_injured\",   date_recovered = \"date_recovered\" )  prepare_exp(   df_exposures0,   player = \"player\",   date = \"date\",   time_expo = \"time_expo\" )  prepare_all(   data_exposures,   data_injuries,   exp_unit = c(\"minutes\", \"hours\", \"days\", \"matches_num\", \"matches_minutes\",     \"activity_days\", \"seasons\") )"},{"path":"https://lzumeta.github.io/injurytools/reference/prepare_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare data in a standardized format — prepare_data","text":"df_injuries0 data frame containing injury information, columns referring player name/id, date injury date recovery (minimal data). player Character referring column name player information stored. date_injured Character referring column name information date injury stored. date_recovered Character referring column name information date recovery stored. df_exposures0 data frame containing exposure information, columns referring player name/id, date exposure total time exposure corresponding data entry (minimal data). date Character referring column name exposure date information stored. Besides, column must class Date integer/numeric. integer/numeric, refer year season started (e.g. date = 2015 refer 2015/2016 season). time_expo Character referring column name information time exposure corresponding date stored. data_exposures Exposure data frame standardized column names, fashion prepare_exp() returns. data_injuries Injury data frame standardized column names, fashion prepare_inj() returns. exp_unit Character defining unit exposure time (\"minutes\" default).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/prepare_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare data in a standardized format — prepare_data","text":"prepare_inj() returns data frame key columns injury data standardized proper format. prepare_exp() returns data frame key columns exposure data standardized proper format. prepare_all() returns injd  S3 object contains necessary information proper data structure perform statistical analyses (e.g. calculate injury summary statistics, visualize injury data). exp_unit \"minutes\" (default), columns tstart_min tstop_min created specify time event (injury) values, starting stopping time interval, respectively. training time minutes, player risk, injury (censorship) occurred. choices, tstart_x tstop_x also created according exp_unit indicated (x, one : min, h, match, minPlay, d, acd s). columns useful survival analysis routines. See Note section. also creates days_lost column based difference date_recovered date_injured days. exist (raw data) overrides.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/prepare_data.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Prepare data in a standardized format — prepare_data","text":"Depending unit exposure, tstart_x tstop_x columns might values (e.g. exp_unit = \"matches_num\" player played match corresponding period time). Please aware performing survival analysis related task.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/prepare_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare data in a standardized format — prepare_data","text":"","code":"df_injuries <- prepare_inj(df_injuries0   = raw_df_injuries,                            player         = \"player_name\",                            date_injured   = \"from\",                            date_recovered = \"until\")  df_exposures <- prepare_exp(df_exposures0 = raw_df_exposures,                             player        = \"player_name\",                             date          = \"year\",                             time_expo     = \"minutes_played\")  # \\donttest{ injd <- prepare_all(data_exposures = df_exposures,                     data_injuries  = df_injuries,                     exp_unit = \"matches_minutes\") head(injd) #> # A tibble: 6 × 19 #>   player t0         tf         date_injured date_recovered tstart     tstop      #>   <fct>  <date>     <date>     <date>       <date>         <date>     <date>     #> 1 adam-… 2017-07-01 2019-06-30 2017-07-31   2017-11-25     2017-07-01 2017-07-31 #> 2 adam-… 2017-07-01 2019-06-30 2018-03-31   2018-05-13     2017-11-25 2018-03-31 #> 3 adam-… 2017-07-01 2019-06-30 2018-09-04   2018-10-19     2018-05-13 2018-09-04 #> 4 adam-… 2017-07-01 2019-06-30 2018-11-09   2018-12-04     2018-10-19 2018-11-09 #> 5 adam-… 2017-07-01 2019-06-30 2019-01-06   2019-01-18     2018-12-04 2019-01-06 #> 6 adam-… 2017-07-01 2019-06-30 2019-04-01   2019-05-31     2019-01-18 2019-04-01 #> # ℹ 12 more variables: tstart_minPlay <dbl>, tstop_minPlay <dbl>, status <dbl>, #> #   enum <dbl>, days_lost <dbl>, player_id <fct>, season <fct>, #> #   games_lost <dbl>, injury <chr>, injury_acl <fct>, injury_type <fct>, #> #   injury_severity <fct> class(injd) #> [1] \"injd\"       \"tbl_df\"     \"tbl\"        \"data.frame\" str(injd, 1) #> injd [108 × 19] (S3: injd/tbl_df/tbl/data.frame) #>  - attr(*, \"unit_exposure\")= chr \"matches_minutes\" #>  - attr(*, \"follow_up\")= tibble [28 × 3] (S3: tbl_df/tbl/data.frame) #>  - attr(*, \"data_exposures\")='data.frame':\t42 obs. of  19 variables: #>  - attr(*, \"data_injuries\")= tibble [82 × 11] (S3: tbl_df/tbl/data.frame) # }"},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimal example of exposure data — raw_df_exposures","title":"Minimal example of exposure data — raw_df_exposures","text":"example player exposure data set contains minimum required exposure information well player- match-related variables. includes Liverpool Football Club male's first team players' exposure data, exposure measured (number minutes ) matches played, two consecutive seasons, 2017-2018 2018-2019. row refers player-season. data scrapped https://www.transfermarkt.com/ website using self-defined R code rvest xml2 packages.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimal example of exposure data — raw_df_exposures","text":"","code":"raw_df_exposures"},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minimal example of exposure data — raw_df_exposures","text":"data frame 42 rows corresponding 28 football players 16 variables: player_name Name football player (factor) player_id Identification number football player (factor) season Season player's entry corresponds (factor) year Year season started (numeric) matches_played Matches played player season (numeric) minutes_played Minutes played player season (numeric) liga Name ligue player played season (factor) club_name Name club player belongs season (factor) club_id Identification number club player belongs season (factor) age Age player season (numeric) height Height player m (numeric) place Place birth player (character) citizenship Citizenship player (factor) position Position player pitch (factor) foot Dominant leg player. One , left right (factor) goals Number goals scored player season (numeric) assists Number assists provided player season (numerical) yellows Number yellow cards received player season (numeric) reds Number red cards received player season (numeric)","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Minimal example of exposure data — raw_df_exposures","text":"https://www.transfermarkt.com/","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Minimal example of exposure data — raw_df_exposures","text":"data frame provided illustrative purposes. warn might accurate, might mismatch non-completeness actually occurred. , use recommended epidemiological research (see also Hoenig et al., 2022).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Minimal example of exposure data — raw_df_exposures","text":"Hoenig, T., Edouard, P., Krause, M., Malhan, D., Relógio, ., Junge, ., & Hollander, K. (2022). Analysis 20,000 injuries European professional football using citizen science-based approach: opportunity epidemiological research?. Journal science medicine sport, 25(4), 300-305.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimal example of injury data — raw_df_injuries","title":"Minimal example of injury data — raw_df_injuries","text":"example injury data set containing minimum required injury information well injury-related variables. includes Liverpool Football Club male's first team players' injury data. row refers player-injury. data scrapped https://www.transfermarkt.com/ website using self-defined R code rvest xml2 packages.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimal example of injury data — raw_df_injuries","text":"","code":"raw_df_injuries"},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minimal example of injury data — raw_df_injuries","text":"data frame 82 rows corresponding 23 players 11 variables: player_name Name football player (factor) player_id Identification number football player (factor) season Season player's entry corresponds (factor) Date injury data entry (Date) Date recovery data entry (Date) days_lost Number days lost due injury (numeric) games_lost Number matches lost due injury (numeric) injury Injury specification appears https://www.transfermarkt.com (character) injury_acl Whether Anterior Cruciate Ligament (ACL) injury (NO_ACL) injury_type five level categorical variable indicating type injury, whether Bone, Concussion, Ligament, Muscle Unknown; , NA otherwise (factor) injury_severity four level categorical variable indicating severity injury (), whether Minor (<7 days lost), Moderate ([7, 28) days lost), Severe ([28, 84) days lost) Very_severe (>=84 days lost); NA otherwise (factor)","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Minimal example of injury data — raw_df_injuries","text":"https://www.transfermarkt.com/","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Minimal example of injury data — raw_df_injuries","text":"data frame provided illustrative purposes. warn might accurate, might mismatch non-completeness actually occurred. , use recommended epidemiological research (see also Hoenig et al., 2022).","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Minimal example of injury data — raw_df_injuries","text":"Hoenig, T., Edouard, P., Krause, M., Malhan, D., Relógio, ., Junge, ., & Hollander, K. (2022). Analysis 20,000 injuries European professional football using citizen science-based approach: opportunity epidemiological research?. Journal science medicine sport, 25(4), 300-305.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/season2year.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the year — season2year","title":"Get the year — season2year","text":"Get year given season.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/season2year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the year — season2year","text":"","code":"season2year(season)"},{"path":"https://lzumeta.github.io/injurytools/reference/season2year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the year — season2year","text":"season Character/factor specifying season. follow pattern \"xxxx/yyyy\", e.g. \"2005/2006\".","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/season2year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the year — season2year","text":"Given season, returns year (numeric) season started.","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/season2year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the year — season2year","text":"","code":"season <- \"2022/2023\" season2year(season) #> [1] 2022"},{"path":"https://lzumeta.github.io/injurytools/reference/validate_injd.html","id":null,"dir":"Reference","previous_headings":"","what":"validator or injd class — validate_injd","title":"validator or injd class — validate_injd","text":"validator injd class","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/validate_injd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"validator or injd class — validate_injd","text":"","code":"validate_injd(x)"},{"path":"https://lzumeta.github.io/injurytools/reference/validate_injd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"validator or injd class — validate_injd","text":"x injd class object","code":""},{"path":"https://lzumeta.github.io/injurytools/reference/validate_injd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"validator or injd class — validate_injd","text":"error x injd class; otherwise x (invisibly)","code":""},{"path":"https://lzumeta.github.io/injurytools/news/index.html","id":"injurytools-102","dir":"Changelog","previous_headings":"","what":"injurytools 1.0.2","title":"injurytools 1.0.2","text":"CRAN release: 2023-09-27 Fixes injsummary(): exposure injury type corrected proper conf_level. Quit pipe operator %>% dependency. Added vignette modelling sports injury data (counts). Added vignette modelling sports injury data (events)","code":""},{"path":"https://lzumeta.github.io/injurytools/news/index.html","id":"injurytools-101","dir":"Changelog","previous_headings":"","what":"injurytools 1.0.1","title":"injurytools 1.0.1","text":"CRAN release: 2023-02-01 Maintenance update: fixes CRAN issues due new release dplyr New feature joins integrated","code":""},{"path":"https://lzumeta.github.io/injurytools/news/index.html","id":"injurytools-100","dir":"Changelog","previous_headings":"","what":"injurytools 1.0.0","title":"injurytools 1.0.0","text":"CRAN release: 2023-01-26 Initial release version CRAN","code":""}]
