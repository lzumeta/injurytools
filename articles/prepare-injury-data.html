<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="injurytools">
<title>Prepare Sports Injury Data • injurytools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare Sports Injury Data">
<meta property="og:description" content="injurytools">
<meta property="og:image" content="https://lzumeta.github.io/injurytools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">injurytools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/prepare-injury-data.html">Prepare data</a>
    <a class="dropdown-item" href="../articles/estimate-epi-measures.html">Estimate summary statistics</a>
    <a class="dropdown-item" href="../articles/explore-injury-data.html">Visualize data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lzumeta/injurytools">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="prepare-injury-data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare Sports Injury Data</h1>
            
            <h4 data-toc-skip class="date">2022-08-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/lzumeta/injurytools/blob/HEAD/vignettes/prepare-injury-data.Rmd" class="external-link"><code>vignettes/prepare-injury-data.Rmd</code></a></small>
      <div class="d-none name"><code>prepare-injury-data.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lzumeta/injurytools" class="external-link">injurytools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Data preprocessing is the very first step one has to follow, every time one wants to analyze sports injury data using <code>injurytools</code> <strong>R</strong> package.</p>
<p>This document briefly shows how to use the functions that are intended to facilitate this data preprocessing step and how the final data set is like.</p>
<div class="section level2">
<h2 id="starting-point">Starting point<a class="anchor" aria-label="anchor" href="#starting-point"></a>
</h2>
<p>Data can be collected in several ways and by several means. A conventional manner is to collect data as events occur, and with this respect it is common, in the field of sports medicine, to store injury records on one hand, and data related to training and competitions/matches (<em>exposure time</em> among others) in a separate table, on the other hand. That is, we consider that the user has the raw data in two separate data sets that we call <strong>injury</strong> and <strong>exposure data</strong>, respectively<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;If the data is not recorded this way, we suggest spliting both information into separate tables and then following the same functions provided by the package.&lt;/p&gt;"><sup>1</sup></a>.</p>
<!-- <img src="../man/figures/Illustration_data.pdf" alt="some text" width="4200" height="4200"> -->
<p><img src="../reference/figures/Illustration_data.png"></p>
</div>
<div class="section level2">
<h2 id="prepare-and-standardize-injury-and-exposure-data">1) prepare and standardize injury and exposure data<a class="anchor" aria-label="anchor" href="#prepare-and-standardize-injury-and-exposure-data"></a>
</h2>
<p>Thus the early task is to tidy up these two sources of data.</p>
<p>As example data sets we consider <a href="https://lzumeta.github.io/injurytools/reference/raw_df_injuries.html"><code>raw_df_injuries</code></a> and <a href="https://lzumeta.github.io/injurytools/reference/raw_df_exposures.html"><code>raw_df_exposures</code></a> data sets available from the <code>injurytools</code> package. These are data of Liverpool Football Club male’s first team players over two consecutive seasons, 2017-2018 and 2018-2019, scrapped from <a href="https://www.transfermarkt.com/" class="external-link uri">https://www.transfermarkt.com/</a> website:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw_df_injuries</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">#&gt;   player_n…¹ playe…² season from       until      days_…³ games…⁴ injury injur…⁵</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> adam-lall… 43530   17/18  2017-07-31 2017-11-25     117      21 Hamst… NO_ACL </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> adam-lall… 43530   17/18  2018-03-31 2018-05-13      43      11 Hamst… NO_ACL </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> adam-lall… 43530   18/19  2018-09-04 2018-10-19      45       7 Groin… NO_ACL </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> adam-lall… 43530   18/19  2018-11-09 2018-12-04      25       4 Knock  NO_ACL </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> adam-lall… 43530   18/19  2019-01-06 2019-01-18      12       2 Knock  NO_ACL </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> adam-lall… 43530   18/19  2019-04-01 2019-05-31      60      10 Knock  NO_ACL </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 2 more variables: injury_type &lt;fct&gt;, injury_severity &lt;fct&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​player_name, ²​player_id, ³​days_lost,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁴​games_lost, ⁵​injury_acl</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw_df_exposures</span><span class="op">)</span></span>
<span><span class="co">#&gt;               player_name player_id season year matches_played minutes_played</span></span>
<span><span class="co">#&gt; 1            adam-lallana     43530  17/18 2017             12            236</span></span>
<span><span class="co">#&gt; 2            adam-lallana     43530  18/19 2018             13            464</span></span>
<span><span class="co">#&gt; 3          alberto-moreno    207917  17/18 2017             16           1264</span></span>
<span><span class="co">#&gt; 4 alex-oxlade-chamberlain    143424  17/18 2017             32           1483</span></span>
<span><span class="co">#&gt; 5                 alisson    105470  18/19 2018             38           3420</span></span>
<span><span class="co">#&gt; 6        andrew-robertson    234803  17/18 2017             22           1943</span></span>
<span><span class="co">#&gt;      liga    club_name club_id age            place                   position</span></span>
<span><span class="co">#&gt; 1 premier fc-liverpool      31  29      St Albans   Midfield_AttackingMidfield</span></span>
<span><span class="co">#&gt; 2 premier fc-liverpool      31  30      St Albans   Midfield_AttackingMidfield</span></span>
<span><span class="co">#&gt; 3 premier fc-liverpool      31  25        Sevilla            Defender_LeftBack</span></span>
<span><span class="co">#&gt; 4 premier fc-liverpool      31  24     Portsmouth     Midfield_CentralMidfield</span></span>
<span><span class="co">#&gt; 5 premier fc-liverpool      31  26  Novo Hamburgo                   Goalkeeper</span></span>
<span><span class="co">#&gt; 6 premier fc-liverpool      31  23        Glasgow            Defender_LeftBack</span></span>
<span><span class="co">#&gt;    foot goals assists reds</span></span>
<span><span class="co">#&gt; 1  both     0       0    0</span></span>
<span><span class="co">#&gt; 2  both     0       0    0</span></span>
<span><span class="co">#&gt; 3  left     0       0    0</span></span>
<span><span class="co">#&gt; 4 right     3       7    0</span></span>
<span><span class="co">#&gt; 5 right     0       0    0</span></span>
<span><span class="co">#&gt; 6  left     1       5    0</span></span></code></pre></div>
<p>We standardize the key column names such as player (subject) identifier, dates of injury and recovery (if any), training/match/season date and amount of time of exposure and set them proper formats by means of <code><a href="../reference/prepare_data.html">prepare_inj()</a></code> and <code><a href="../reference/prepare_data.html">prepare_exp()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The &lt;code&gt;date&lt;/code&gt; argument should be either of class &lt;em&gt;Date&lt;/em&gt;, given in “%Y-%m-%d” format, or of class &lt;em&gt;integer&lt;/em&gt;/&lt;em&gt;numeric&lt;/em&gt;, a 4-digit integer referring to year in which the season started.&lt;/p&gt;"><sup>2</sup></a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_injuries</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_data.html">prepare_inj</a></span><span class="op">(</span>df_injuries0   <span class="op">=</span> <span class="va">raw_df_injuries</span>,</span>
<span>                           player         <span class="op">=</span> <span class="st">"player_name"</span>,</span>
<span>                           date_injured   <span class="op">=</span> <span class="st">"from"</span>,</span>
<span>                           date_recovered <span class="op">=</span> <span class="st">"until"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_exposures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_data.html">prepare_exp</a></span><span class="op">(</span>df_exposures0 <span class="op">=</span> <span class="va">raw_df_exposures</span>,</span>
<span>                            player        <span class="op">=</span> <span class="st">"player_name"</span>,</span>
<span>                            date          <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>                            time_expo     <span class="op">=</span> <span class="st">"minutes_played"</span><span class="op">)</span></span></code></pre></div>
<p>We suggest collecting exposure time on as fine scale as possible, i.e. <strong>minutes</strong> would be the desired unit as the total time spent training and participating in competitions/matches. However, if the units are “seasons” then do:</p>
<details><p><summary> See the R-code </summary></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## a possible way for the case that each row in exposure data correspond to a</span></span>
<span><span class="co">## season and there is nor more information about time of exposure</span></span>
<span><span class="va">raw_df_exposures</span><span class="op">$</span><span class="va">time_expo_aux</span> <span class="op">&lt;-</span> <span class="fl">1</span> </span>
<span><span class="va">df_exposures2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_data.html">prepare_exp</a></span><span class="op">(</span>df_exposures0 <span class="op">=</span> <span class="va">raw_df_exposures</span>,</span>
<span>                             player        <span class="op">=</span> <span class="st">"player_name"</span>,</span>
<span>                             date          <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>                             time_expo     <span class="op">=</span> <span class="st">"time_expo_aux"</span><span class="op">)</span></span>
<span><span class="va">injd</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/prepare_data.html">prepare_all</a></span><span class="op">(</span>data_exposures <span class="op">=</span> <span class="va">df_exposures2</span>,</span>
<span>                     data_injuries  <span class="op">=</span> <span class="va">df_injuries</span>,</span>
<span>                     exp_unit <span class="op">=</span> <span class="st">"seasons"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">injd</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 19</span></span></span>
<span><span class="co">#&gt;   player       t0         tf         date_inj…¹ date_rec…² tstart     tstop     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> adam-lallana 2017-07-01 2019-06-30 2017-07-31 2017-11-25 2017-07-01 2017-07-31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> adam-lallana 2017-07-01 2019-06-30 2018-03-31 2018-05-13 2017-11-25 2018-03-31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> adam-lallana 2017-07-01 2019-06-30 2018-09-04 2018-10-19 2018-05-13 2018-09-04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> adam-lallana 2017-07-01 2019-06-30 2018-11-09 2018-12-04 2018-10-19 2018-11-09</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> adam-lallana 2017-07-01 2019-06-30 2019-01-06 2019-01-18 2018-12-04 2019-01-06</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> adam-lallana 2017-07-01 2019-06-30 2019-04-01 2019-05-31 2019-01-18 2019-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 12 more variables: tstart_s &lt;dbl&gt;, tstop_s &lt;dbl&gt;, status &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   enum &lt;dbl&gt;, days_lost &lt;dbl&gt;, player_id &lt;fct&gt;, season &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   games_lost &lt;dbl&gt;, injury &lt;chr&gt;, injury_acl &lt;fct&gt;, injury_type &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   injury_severity &lt;fct&gt;, and abbreviated variable names ¹​date_injured,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​date_recovered</span></span></span></code></pre></div>
</details>
</div>
<div class="section level2">
<h2 id="integrate-both-sources-of-data">2) integrate both sources of data<a class="anchor" aria-label="anchor" href="#integrate-both-sources-of-data"></a>
</h2>
<p>Then, we apply <code><a href="../reference/prepare_data.html">prepare_all()</a></code> to the data sets tidied up above. It is important to specify the unit of exposure, <code>exp_unit</code> argument, that must be one of “minutes”, “hours”, “days”, “matches_num”, “matches_minutes”, or “activity_days”, “seasons”.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">injd</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/prepare_data.html">prepare_all</a></span><span class="op">(</span>data_exposures <span class="op">=</span> <span class="va">df_exposures</span>,</span>
<span>                    data_injuries  <span class="op">=</span> <span class="va">df_injuries</span>,</span>
<span>                    exp_unit <span class="op">=</span> <span class="st">"matches_minutes"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">injd</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 19</span></span></span>
<span><span class="co">#&gt;   player       t0         tf         date_inj…¹ date_rec…² tstart     tstop     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> adam-lallana 2017-07-01 2019-06-30 2017-07-31 2017-11-25 2017-07-01 2017-07-31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> adam-lallana 2017-07-01 2019-06-30 2018-03-31 2018-05-13 2017-11-25 2018-03-31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> adam-lallana 2017-07-01 2019-06-30 2018-09-04 2018-10-19 2018-05-13 2018-09-04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> adam-lallana 2017-07-01 2019-06-30 2018-11-09 2018-12-04 2018-10-19 2018-11-09</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> adam-lallana 2017-07-01 2019-06-30 2019-01-06 2019-01-18 2018-12-04 2019-01-06</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> adam-lallana 2017-07-01 2019-06-30 2019-04-01 2019-05-31 2019-01-18 2019-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 12 more variables: tstart_minPlay &lt;dbl&gt;, tstop_minPlay &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   status &lt;dbl&gt;, enum &lt;dbl&gt;, days_lost &lt;dbl&gt;, player_id &lt;fct&gt;, season &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   games_lost &lt;dbl&gt;, injury &lt;chr&gt;, injury_acl &lt;fct&gt;, injury_type &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   injury_severity &lt;fct&gt;, and abbreviated variable names ¹​date_injured,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​date_recovered</span></span></span>
<span><span class="co"># injd %&gt;% </span></span>
<span><span class="co">#   group_by(player) %&gt;% </span></span>
<span><span class="co">#   slice(1, n())</span></span></code></pre></div>
<p>The outcome is a prepared data set, structured in an suitable way that is ready for its use by statistical modelling approaches. This data set will always have the columns listed below (standardized columns or created by the function), as well as further (optional) sports related variables.</p>
<ul>
<li><p><code>player</code>: player identifier.</p></li>
<li><p><code>t0</code> and <code>tf</code>: the follow-up period of the corresponding player, i.e. player’s first and last dates observed (same value for each <code>player</code>).</p></li>
<li><p><code>date_injured</code> and <code>date_recovered</code>: dates of injury and recovery of the corresponding observation (if any; otherwise <code>NA</code>).</p></li>
<li><p><code>tstart</code> and <code>tstop</code>: beginning and ending dates of the corresponding interval in which the observation has been at risk of injury.</p></li>
<li><p><code>tstart_x</code>and <code>tstop_x</code>: beginning and ending times of the corresponding interval in which the observation has been at risk of injury (it depends on the unit of exposure time specified).</p></li>
<li><p><code>status</code>: injury (event) indicator.</p></li>
<li><p><code>enum</code>: an integer indicating the recurrence number, i.e. the <span class="math inline">\(k\)</span>-th injury (event), at which the observation is at risk.</p></li>
<li><p><code>days_lost</code>: number of days lost due to injury occured at <code>tstop</code>/<code>date_injured</code> (if any; otherwise 0), i.e. <code>date_recovered</code> - <code>date_injured</code> in days.</p></li>
</ul>
<p>For example the first row of <code>injd</code> corresponds to the player Adam Lallana to the risk set that starts in 2017-07-01 and ends at 2017-07-31, after having played 236 minutes, when he got firstly (<code>enum</code> = 1) injured (<code>status</code> = 1). The second row corresponds to the risk set of being injured by a second injury (<code>enum</code> = 2), starts when he was fully recovered in 2017-11-23 and finshes when he suffered another hamstring injury<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The fact that &lt;code&gt;tstart&lt;/code&gt; equals &lt;code&gt;tstop&lt;/code&gt; is due to the player did not participate and had no minutes playing a match in that period of time. Note that this will cause problems if one wants to use survival analysis techniques. Possible alternatives: use another exposure time unit, or add a small number of minutes (e.g. 0.5)…&lt;/p&gt;"><sup>3</sup></a>.</p>
</div>
<div class="section level2">
<h2 id="the-prepared-data-set-an-injd-object">The prepared data set, an <code>injd</code> object<a class="anchor" aria-label="anchor" href="#the-prepared-data-set-an-injd-object"></a>
</h2>
<p>This final data set it’s an <strong>R</strong> object of class <code>injd</code>,</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">injd</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "injd"       "tbl_df"     "tbl"        "data.frame"</span></span></code></pre></div>
<p>and have the following attributes:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">injd</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; injd [108 × 19] (S3: injd/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  - attr(*, "unit_exposure")= chr "matches_minutes"</span></span>
<span><span class="co">#&gt;  - attr(*, "follow_up")= tibble [28 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  - attr(*, "data_exposures")='data.frame':   42 obs. of  16 variables:</span></span>
<span><span class="co">#&gt;  - attr(*, "data_injuries")= tibble [82 × 11] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  - attr(*, "data_injuries_long")= tibble [164 × 3] (S3: tbl_df/tbl/data.frame)</span></span></code></pre></div>
<ul>
<li><p><code>unit_exposure</code>: a character indicating the unit of exposure time used in this object.</p></li>
<li><p><code>follow_up</code>: a data frame consisting of one row per player with their first and last dates observed (<code>t0</code> and <code>tf</code> columns).</p></li>
<li><p><code>data_exposures</code>: the preprocessed exposure data frame.</p></li>
<li><p><code>data_injuries</code>: the preprocessed injury data frame.</p></li>
<li><p><code>data_injuries_long</code>: <code>data_injuries</code> data frame in long format in which each row corresponds to player-event_type.</p></li>
</ul>
<p>To extract one of the attributes, for example <code>unit_exposure</code>, type:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">injd</span>, <span class="st">"unit_exposure"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "matches_minutes"</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lore Zumeta Olaskoaga, Dae-Jin Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
